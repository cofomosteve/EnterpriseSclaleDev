{
    "$schema": "https://schema.management.azure.com/schemas/2019-08-01/managementGroupDeploymentTemplate.json#",
    "contentVersion": "1.0.0.0",
    "parameters": {



        "globalvariable": {
            "type": "object",
            "defaultValue": {
                "scope": "",
                "scopeplatform": "",
                "scopemanagement": "",
                "scopeconnectivity": "",
                "scopeidentity": "",
                "scopelz": "",
                "scopelzonline": "",
                "scopelzcorp": "",

                "genericresourceprefix": {
                    "mgngroupmgn": "",
                    "resourcgroupmgn": "",
                    "policydefpmgn": "",
                    "policyassignmgn": "",
                    "rbacassignmgn": "",
                    "rbacdefmgn": "",
                    "loganalyticwkmgn": "",
                    "keyvaultmgn": "",
                    "storagemgn": "",
                    "storagediagnosticmgn": "",
                    "conatainerinstancemgn": "",
                    "containerregistrymgn": "",
                    "budgetconsumptionmgn": "",
                    "diasgsettingmgn": "",
                    "deploymentmgn": "",
                    "virtualnetworkmgn": "",
                    "subnetmgn": "",
                    "virtualnetworkpeeringmgn": "",
                    "virtualnetworkgatewaymgn": "",
                    "localnetworkgatewaylocalmgn": "",
                    "networksitetositemgn": "",
                    "vpnconnectionmgn": "",
                    "nsgmgn": "",
                    "asgmgn": "",
                    "pubipmgn": "",
                    "virtualmachinemgn": "",
                    "virtualmachinestorageaccountmgn": "",
                    "nicmgn": "",
                    "dnsprivatemgn": "",
                    "dnspubblicmgn": "",
                    "loadbalancermgn": "",
                    "applicationgatewaymgn": "",
                    "privatelinkmgn": "",
                    "privateendpointmgn": "",
                    "azurefirewallmgn": "",
                    "azurefirewallpoliciesmgn": "",
                    "azurefirewallrulegroupmgn": "",
                    "securityprincingmgn": "",
                    "workspacedatasourcemgn": "",
                    "automationaccountmgn": "",
                    "workspacemgn": "",
                    "linkedservicemgn": "",
                    "ddosplanmgn": "",
                    "networkwatchermgn": "",
                    "networkwatcherflowlogmgn": "",
                    "databaseauditsettingmgn": "",
                    "databasetransparencryptmgn": "",
                    "dataasesecalertpolmgn": "",
                    "databasevulassessmgn": "",
                    "virrtualhubmgn": "",
                    "virrtualhubconnectionmgn": "",
                    "virtualwanmgn": "",
                    "vpngatewaymgn": "",
                    "expressroutegatewaymgn": "",
                    "virtualmachineextensionmgn": "",
                    "opmanagesolutionmgn": "",
                    "azmonitorappinsigmgn": "",
                    "azmonitorvminsigmgn": "",
                    "azmonitornetworkinsigmgn": "",
                    "azmonitorsqlinsigmgn": "",
                    "azmonitorcontainerinsigmgn": "",
                    "azmonitorcosmosdbinsigmgn": "",
                    "azmonitorressourcegpinsigmgn": "",
                    "azmonitorstorageinsigmgn": "",
                    "azmonitorkeyvaultinsigmgn": "",
                    "azmonitorredisinsigmgn": "",
                    "trafficmanagemgn": "",
                    "cdnmgn": "",
                    "migratemgn": "",
                    "azureacrmgn": "",
                    "fontdoormgn": "",
                    "backupmgn": "",
                    "bastionhostmgn": ""
                }

            }
        }


    },
    "variables": {


        //********************************Variable for Generic Naming Convention*************************************/
        // "prefixmgn": "[parameters('globalvariable').prefixmgn]",
        // "appname": "[parameters('globalvariable').appname]",
        // "businessunit": "[parameters('globalvariable').businessunit]",
        // "topLevelManagementGroupPrefix": "[parameters('globalvariable').topLevelManagementGroupPrefix]",
        "scope": "[parameters('globalvariable').scope]",
        // "scopeplatform": "[parameters('globalvariable').scopeplatform]",
        // "scopemanagement": "[parameters('globalvariable').scopemanagement]",
        // "scopeconnectivity": "[parameters('globalvariable').scopeconnectivity]",
        // "scopeidentity": "[parameters('globalvariable').scopeidentity]",
        "scopelz": "[parameters('globalvariable').scopelz]",
        // "scopelzonline": "[parameters('globalvariable').scopelzonline]",
        // "scopelzcorp": "[parameters('globalvariable').scopelzcorp]",



        "systemopsrole": "[concat(parameters('globalvariable').genericresourceprefix.rbacdefmgn,'Custom Systems Ops')]",
        "landingzonewonerrole": "[concat(parameters('globalvariable').genericresourceprefix.rbacdefmgn,'Custom Landing Zone Owner')]",
        "landingzonecontributorrole": "[concat(parameters('globalvariable').genericresourceprefix.rbacdefmgn,'Custom Landing Zone Contributor')]",
        "kubernettesrole": "[concat(parameters('globalvariable').genericresourceprefix.rbacdefmgn,'Custom Kubernettes Administrator')]",
        "vmwarerole": "[concat(parameters('globalvariable').genericresourceprefix.rbacdefmgn,'Custom Vmware Solution Administrator')]",
        "billingrole": "[concat(parameters('globalvariable').genericresourceprefix.rbacdefmgn,'Custom  Billing Administrator')]",
        "secyrityopsrole": "[concat(parameters('globalvariable').genericresourceprefix.rbacdefmgn,'Custom Security Ops')]",
        "automationrole": "[concat(parameters('globalvariable').genericresourceprefix.rbacdefmgn,'Custom Automation')]",
        "computesrole": "[concat(parameters('globalvariable').genericresourceprefix.rbacdefmgn,'Custom Compute  Ops')]",
        "storagerole": "[concat(parameters('globalvariable').genericresourceprefix.rbacdefmgn,'Custom Storage  Ops')]",
        "databaseerole": "[concat(parameters('globalvariable').genericresourceprefix.rbacdefmgn,'Custom Database  Ops')]",
        "networksrole": "[concat(parameters('globalvariable').genericresourceprefix.rbacdefmgn,'Custom Network  Ops')]",
        "identityaccessmgnrole": "[concat(parameters('globalvariable').genericresourceprefix.rbacdefmgn,'Custom Identity and Access Management')]",
        "managementrole": "[concat(parameters('globalvariable').genericresourceprefix.rbacdefmgn,'Custom Management Administrator')]",
        "backuprole": "[concat(parameters('globalvariable').genericresourceprefix.rbacdefmgn,'Custom Backup et Recovery')]",
        "migrationRolerole": "[concat(parameters('globalvariable').genericresourceprefix.rbacdefmgn,'Custom Migration IaaS and PaaS')]",
        "devopsrole": "[concat(parameters('globalvariable').genericresourceprefix.rbacdefmgn,'Custom Devops')]",
        "apsopsrole": "[concat(parameters('globalvariable').genericresourceprefix.rbacdefmgn,'Custom AppsOps')]",
        "enablementrole": "[concat(parameters('globalvariable').genericresourceprefix.rbacdefmgn,'Custom Enablement')]",

        "systemopsroledesc": "Systems Ops",
        "kubernettesroledesc": "Kubernettes Administrator",
        "landingzonewonerroledesc": "Landing Zone Owner",
        "landingzonecontributorroledesc": "Landing Zone Contributor",
        "vmwareroledesc": "Vmware Solution Administrator",
        "billingroledesc": "Billing Administrator",
        "secyrityopsroledesc": "Security Ops",
        "automationroledesc": "Automation",
        "computesroledesc": "Compute  Ops",
        "storageroledesc": "Storage  Ops",
        "databaseeroledesc": "Database  Ops",
        "networksroledesc": "Network  Ops",
        "identityaccessmgnroledesc": "Identity and Access Management",
        "managementroledesc": "Management",
        "backuproledesc": "Backup et Recovery",
        "migrationRoleroledesc": "Migration IaaS and PaaS",
        "devopsroledesc": "Devops",
        "apsopsroledesc": "Appsops",
        "enablementroledesc": "Enablement",

        "systemopsroleid": "[guid(variables('systemopsrole'))]",
        "kubernettesroleid": "[guid(variables('kubernettesrole'))]",
        "landingzonewonerroleid": "[guid(variables('landingzonewonerrole'))]",
        "landingzonecontributorroleid": "[guid(variables('landingzonecontributorrole'))]",
        "vmwareroleid": "[guid(variables('vmwarerole'))]",
        "billingroleid": "[guid(variables('billingrole'))]",
        "secyrityopsroleid": "[guid(variables('secyrityopsrole'))]",
        "automationroleid": "[guid(variables('automationrole'))]",
        "computesroleid": "[guid(variables('computesrole'))]",
        "storageroleid": "[guid(variables('storagerole'))]",
        "databaseeroleid": "[guid(variables('databaseerole'))]",
        "networksroleid": "[guid(variables('networksrole'))]",
        "identityaccessmgnroleid": "[guid(variables('identityaccessmgnrole'))]",
        "managementroleid": "[guid(variables('managementrole'))]",
        "backuproleid": "[guid(variables('backuprole'))]",
        "migrationroleid": "[guid(variables('backuprole'))]",
        "devopsroleid": "[guid(variables('devopsrole'))]",
        "apsopsroleid": "[guid(variables('apsopsrole'))]",
        "enablementroleid": "[guid(variables('enablementrole'))]",

        "Role": {
            "RoleDefinitions": [
                {
                    "properties": {
                        "roleName": "[variables('systemopsrole')]",
                        "description": "[variables('systemopsroledesc')]",
                        "type": "customRole",
                        "id": "[variables('systemopsroleid')]",
                        "IsCustom": true,
                        "permissions": [
                            {
                                "actions": [

                                    "Microsoft.Insights/*",


                                    "Microsoft.Management/managementGroups/*",
                                    "Microsoft.Authorization/*",
                                    "Microsoft.Capacity/*",
                                    "Microsoft.RecoveryServices/*",
                                    //Monitoring
                                    "Microsoft.Insights/*",
                                    "Microsoft.AlertsManagement/*",
                                    "Microsoft.OperationalInsights/*",
                                    "Microsoft.WorkloadMonitor/monitors/*",

                                    "Microsoft.ContainerRegistry/*",

                                    "Microsoft.Resources/subscriptions/resourceGroups/read",
                                    "Microsoft.Management/managementGroups/read",

                                    //
                                    "Microsoft.Support/*"
                                ], //,
                                "notActions": [],
                                "dataActions": [],
                                "notDataActions": []
                            }
                        ],
                        "assignableScopes": [
                            "[variables('scope')]"
                        ]
                    },
                    "name": "[variables('systemopsrole')]"
                },
                {
                    "properties": {
                        "roleName": "[variables('landingzonewonerrole')]",
                        "description": "[variables('landingzonewonerroledesc')]",
                        "type": "customRole",
                        "id": "[variables('landingzonewonerroleid')]",
                        "IsCustom": true,
                        "permissions": [
                            {
                                "actions": [
                                    "*",
                                    "Microsoft.Resources/subscriptions/resourceGroups/read",
                                    "Microsoft.Management/managementGroups/read",
                                    //
                                    "Microsoft.Support/*"
                                ], //,
                                "notActions": [],
                                "dataActions": [],
                                "notDataActions": []
                            }
                        ],
                        "assignableScopes": [
                            "[variables('scopelz')]"
                        ]
                    },
                    "name": "[variables('landingzonewonerrole')]"
                },
                {
                    "properties": {
                        "roleName": "[variables('landingzonecontributorrole')]",
                        "description": "[variables('landingzonecontributorroledesc')]",
                        "type": "customRole",
                        "id": "[variables('landingzonecontributorroleid')]",
                        "IsCustom": true,
                        "permissions": [
                            {
                                "actions": [

                                    "Microsoft.Authorization/*/Delete",
                                    "Microsoft.Authorization/*/Write",
                                    "Microsoft.Authorization/elevateAccess/Action",
                                    "Microsoft.Blueprint/blueprintAssignments/write",
                                    "Microsoft.Blueprint/blueprintAssignments/delete",
                                    "Microsoft.Compute/galleries/share/action",
                                    //
                                    "Microsoft.Support/*"
                                ], //,
                                "notActions": [],
                                "dataActions": [],
                                "notDataActions": []
                            }
                        ],
                        "assignableScopes": [
                            "[variables('scopelz')]"
                        ]
                    },
                    "name": "[variables('landingzonecontributorrole')]"
                },
                {
                    "properties": {
                        "roleName": "[variables('automationrole')]",
                        "description": "[variables('automationroledesc')]",
                        "type": "customRole",
                        "id": "[variables('automationroleid')]",
                        "IsCustom": true,
                        "permissions": [
                            {
                                "actions": [

                                    "Microsoft.Insights/*",


                                    "Microsoft.Automation/automationAccounts/*",

                                    //******************/

                                    "Microsoft.Resources/subscriptions/resourceGroups/read",
                                    "Microsoft.Management/managementGroups/read",

                                    //
                                    "Microsoft.Support/*"
                                ], //,
                                "notActions": [],
                                "dataActions": [],
                                "notDataActions": []
                            }
                        ],
                        "assignableScopes": [
                            "[variables('scope')]"
                        ]
                    },
                    "name": "[variables('automationrole')]"
                },

                {
                    "properties": {
                        "roleName": "[variables('kubernettesrole')]",
                        "description": "[variables('kubernettesroledesc')]",
                        "type": "customRole",
                        "id": "[variables('kubernettesroleid')]",
                        "IsCustom": true,
                        "permissions": [
                            {
                                "actions": [

                                    "Microsoft.Insights/*",


                                    "Microsoft.Automation/automationAccounts/*",


                                    /*****************************/

                                    "Microsoft.Authorization/*/read",
                                    "Microsoft.Insights/alertRules/*",
                                    "Microsoft.Resources/deployments/write",
                                    "Microsoft.Resources/subscriptions/operationresults/read",
                                    "Microsoft.Resources/subscriptions/read",
                                    "Microsoft.Resources/subscriptions/resourceGroups/read",
                                    "Microsoft.Support/*",
                                    "Microsoft.ContainerService/managedClusters/listClusterUserCredential/action",

                                    "Microsoft.ContainerRegistry/*",
                                    "Microsoft.ContainerService/*",

                                    //******************/

                                    "Microsoft.Resources/subscriptions/resourceGroups/read",
                                    "Microsoft.Management/managementGroups/read",

                                    //
                                    "Microsoft.Support/*"
                                ], //,
                                "notActions": [],
                                "dataActions": [],
                                "notDataActions": []
                            }
                        ],
                        "assignableScopes": [
                            "[variables('scope')]"
                        ]
                    },
                    "name": "[variables('kubernettesrole')]"
                },
                {
                    "properties": {
                        "roleName": "[variables('vmwarerole')]",
                        "description": "[variables('vmwareroledesc')]",
                        "type": "customRole",
                        "id": "[variables('vmwareroleid')]",
                        "IsCustom": true,
                        "permissions": [
                            {
                                "actions": [

                                    "Microsoft.Insights/*",


                                    "Microsoft.Automation/automationAccounts/*",

                                    //******************/

                                    "Microsoft.Resources/subscriptions/resourceGroups/read",
                                    "Microsoft.Management/managementGroups/read",

                                    //
                                    "Microsoft.Support/*"
                                ], //,
                                "notActions": [],
                                "dataActions": [],
                                "notDataActions": []
                            }
                        ],
                        "assignableScopes": [
                            "[variables('scope')]"
                        ]
                    },
                    "name": "[variables('vmwarerole')]"
                },
                {
                    "properties": {
                        "roleName": "[variables('computesrole')]",
                        "description": "[variables('computesroledesc')]",
                        "type": "customRole",
                        "id": "[variables('computesroleid')]",
                        "IsCustom": true,
                        "permissions": [
                            {
                                "actions": [

                                    "Microsoft.Insights/*",


                                    "Microsoft.Automation/automationAccounts/*",

                                    "Microsoft.DevTestLab/schedules/*",
                                    "Microsoft.Insights/alertRules/*",
                                    "Microsoft.Network/applicationGateways/*",
                                    "Microsoft.Network/networkSecurityGroups/*",
                                    "Microsoft.RecoveryServices/*",
                                    "Microsoft.SqlVirtualMachine/*",
                                    "Microsoft.Network/locations/*",
                                    "Microsoft.Storage/storageAccounts/listKeys/action",
                                    "Microsoft.Storage/storageAccounts/read",

                                    "Microsoft.Network/publicIPAddresses/*",
                                    "Microsoft.Network/virtualNetworks/*",
                                    "Microsoft.Network/loadBalancers/read",
                                    "Microsoft.Network/networkInterfaces/*",
                                    "Microsoft.Compute/virtualMachines/*",


                                    "Microsoft.ResourceHealth/availabilityStatuses/read",
                                    "Microsoft.Resources/deployments/*",

                                    //******************/

                                    "Microsoft.Resources/subscriptions/resourceGroups/read",
                                    "Microsoft.Management/managementGroups/read",

                                    //
                                    "Microsoft.Support/*"
                                ], //,
                                "notActions": [],
                                "dataActions": [],
                                "notDataActions": []
                            }
                        ],
                        "assignableScopes": [
                            "[variables('scope')]"
                        ]
                    },
                    "name": "[variables('computesrole')]"
                },
                {
                    "properties": {
                        "roleName": "[variables('backuprole')]",
                        "description": "[variables('backuproledesc')]",
                        "type": "customRole",
                        "id": "[variables('backuproleid')]",
                        "IsCustom": true,
                        "permissions": [
                            {
                                "actions": [

                                    "Microsoft.Insights/*",


                                    "Microsoft.Automation/automationAccounts/*",

                                    //******************/

                                    "Microsoft.Authorization/*/read",
                                    "Microsoft.Network/virtualNetworks/read",
                                    "Microsoft.RecoveryServices/locations/*",
                                    "Microsoft.RecoveryServices/Vaults/backupFabrics/operationResults/*",
                                    "Microsoft.RecoveryServices/Vaults/backupFabrics/protectionContainers/*",
                                    "Microsoft.RecoveryServices/Vaults/backupFabrics/refreshContainers/action",
                                    "Microsoft.RecoveryServices/Vaults/backupJobs/*",
                                    "Microsoft.RecoveryServices/Vaults/backupJobsExport/action",
                                    "Microsoft.RecoveryServices/Vaults/backupOperationResults/*",
                                    "Microsoft.RecoveryServices/Vaults/backupPolicies/*",
                                    "Microsoft.RecoveryServices/Vaults/backupProtectableItems/*",
                                    "Microsoft.RecoveryServices/Vaults/backupProtectedItems/*",
                                    "Microsoft.RecoveryServices/Vaults/backupProtectionContainers/*",
                                    "Microsoft.RecoveryServices/Vaults/backupSecurityPIN/*",
                                    "Microsoft.RecoveryServices/Vaults/backupUsageSummaries/read",
                                    "Microsoft.RecoveryServices/Vaults/certificates/*",
                                    "Microsoft.RecoveryServices/Vaults/extendedInformation/*",
                                    "Microsoft.RecoveryServices/Vaults/monitoringAlerts/read",
                                    "Microsoft.RecoveryServices/Vaults/monitoringConfigurations/*",
                                    "Microsoft.RecoveryServices/Vaults/read",
                                    "Microsoft.RecoveryServices/Vaults/registeredIdentities/*",
                                    "Microsoft.RecoveryServices/Vaults/usages/*",
                                    "Microsoft.Resources/deployments/*",
                                    "Microsoft.Resources/subscriptions/resourceGroups/read",
                                    "Microsoft.Storage/storageAccounts/read",
                                    "Microsoft.RecoveryServices/Vaults/backupstorageconfig/*",
                                    "Microsoft.RecoveryServices/Vaults/backupconfig/*",
                                    "Microsoft.RecoveryServices/Vaults/backupValidateOperation/action",
                                    "Microsoft.RecoveryServices/Vaults/write",
                                    "Microsoft.RecoveryServices/Vaults/backupOperations/read",
                                    "Microsoft.RecoveryServices/Vaults/backupEngines/read",
                                    "Microsoft.RecoveryServices/Vaults/backupFabrics/backupProtectionIntent/*",
                                    "Microsoft.RecoveryServices/Vaults/backupFabrics/protectableContainers/read",
                                    "Microsoft.RecoveryServices/locations/backupStatus/action",
                                    "Microsoft.RecoveryServices/locations/backupPreValidateProtection/action",
                                    "Microsoft.RecoveryServices/locations/backupValidateFeatures/action",
                                    "Microsoft.RecoveryServices/Vaults/monitoringAlerts/write",
                                    "Microsoft.RecoveryServices/operations/read",
                                    "Microsoft.RecoveryServices/locations/operationStatus/read",
                                    "Microsoft.RecoveryServices/Vaults/backupProtectionIntents/read",
                                    /********************************/

                                    "Microsoft.Resources/subscriptions/resourceGroups/read",
                                    "Microsoft.Management/managementGroups/read",

                                    //
                                    "Microsoft.Support/*"
                                ], //,
                                "notActions": [],
                                "dataActions": [],
                                "notDataActions": []
                            }
                        ],
                        "assignableScopes": [
                            "[variables('scope')]"
                        ]
                    },
                    "name": "[variables('backuprole')]"
                },
                {
                    "properties": {
                        "roleName": "[variables('apsopsrole')]",
                        "description": "[variables('apsopsroledesc')]",
                        "type": "customRole",
                        "id": "[variables('apsopsroleid')]",
                        "IsCustom": true,
                        "permissions": [
                            {
                                "actions": [

                                    "Microsoft.Insights/*",


                                    "Microsoft.Authorization/*/read",
                                    "Microsoft.Insights/alertRules/*",
                                    "Microsoft.ResourceHealth/availabilityStatuses/read",
                                    "Microsoft.Resources/deployments/*",

                                    "Microsoft.Insights/components/*",

                                    "Microsoft.Web/*",
                                    /*"Microsoft.Web/serverFarms/*",
                                    //"Microsoft.Web/hostingEnvironments/Join/Action"
                                    "Microsoft.Web/certificates/*",
                                    "Microsoft.Web/listSitesAssignedToHostName/read",
                                    "Microsoft.Web/serverFarms/join/action",
                                    "Microsoft.Web/serverFarms/read",
                                    "Microsoft.Web/sites/*",*/
                                    //******************/

                                    "Microsoft.Resources/subscriptions/resourceGroups/read",
                                    "Microsoft.Management/managementGroups/read",

                                    //
                                    "Microsoft.Support/*"
                                ], //,
                                "notActions": [],
                                "dataActions": [],
                                "notDataActions": []
                            }
                        ],
                        "assignableScopes": [
                            "[variables('scope')]"
                        ]
                    },
                    "name": "[variables('apsopsrole')]"
                },
                {
                    "properties": {
                        "roleName": "[variables('migrationRolerole')]",
                        "description": "[variables('migrationRoleroledesc')]",
                        "type": "customRole",
                        "id": "[variables('migrationroleid')]",
                        "IsCustom": true,
                        "permissions": [
                            {
                                "actions": [

                                    "Microsoft.Insights/*",


                                    "Microsoft.Automation/automationAccounts/*",

                                    //******************/

                                    "Microsoft.Resources/subscriptions/resourceGroups/read",
                                    "Microsoft.Management/managementGroups/read",

                                    //
                                    "Microsoft.Support/*"
                                ], //,
                                "notActions": [],
                                "dataActions": [],
                                "notDataActions": []
                            }
                        ],
                        "assignableScopes": [
                            "[variables('scope')]"
                        ]
                    },
                    "name": "[variables('migrationRolerole')]"
                },
                {
                    "properties": {
                        "roleName": "[variables('storagerole')]",
                        "description": "[variables('storageroledesc')]",
                        "type": "customRole",
                        "id": "[variables('storageroleid')]",
                        "IsCustom": true,
                        "permissions": [
                            {
                                "actions": [

                                    "Microsoft.Insights/*",


                                    "Microsoft.Automation/automationAccounts/*",

                                    //******************/
                                    "Microsoft.Insights/diagnosticSettings/*",
                                    "Microsoft.Network/virtualNetworks/subnets/joinViaServiceEndpoint/action",
                                    "Microsoft.ResourceHealth/availabilityStatuses/read",
                                    "Microsoft.Resources/deployments/*",
                                    "Microsoft.Resources/subscriptions/resourceGroups/read",
                                    "Microsoft.Storage/storageAccounts/*",
                                    //******************/

                                    "Microsoft.Resources/subscriptions/resourceGroups/read",
                                    "Microsoft.Management/managementGroups/read",

                                    //
                                    "Microsoft.Support/*"
                                ], //,
                                "notActions": [],
                                "dataActions": [],
                                "notDataActions": []
                            }
                        ],
                        "assignableScopes": [
                            "[variables('scope')]"
                        ]
                    },
                    "name": "[variables('storagerole')]"
                },

                {
                    "properties": {
                        "roleName": "[variables('databaseerole')]",
                        "description": "[variables('databaseeroledesc')]",
                        "type": "customRole",
                        "id": "[variables('databaseeroleid')]",
                        "IsCustom": true,
                        "permissions": [
                            {
                                "actions": [

                                    "Microsoft.Insights/*",


                                    "Microsoft.Automation/automationAccounts/*",

                                    //******************/
                                    "Microsoft.Insights/alertRules/*",
                                    "Microsoft.ResourceHealth/availabilityStatuses/read",

                                    "Microsoft.Resources/subscriptions/resourceGroups/read",
                                    "Microsoft.Sql/locations/*/read",
                                    "Microsoft.Sql/servers/databases/*",
                                    "Microsoft.Sql/servers/read",
                                    "Microsoft.Insights/metrics/read",
                                    "Microsoft.Insights/metricDefinitions/read",

                                    "Microsoft.Network/networkSecurityGroups/*",
                                    "Microsoft.Network/routeTables/*",
                                    "Microsoft.Sql/locations/*/read",
                                    "Microsoft.Sql/locations/instanceFailoverGroups/*",
                                    "Microsoft.Sql/managedInstances/*",
                                    "Microsoft.Support/*",
                                    "Microsoft.Network/virtualNetworks/subnets/*",
                                    "Microsoft.Network/virtualNetworks/*",
                                    "Microsoft.Authorization/*/read",
                                    "Microsoft.Insights/alertRules/*",
                                    "Microsoft.Insights/metrics/read",
                                    "Microsoft.Insights/metricDefinitions/read",

                                    "Microsoft.Sql/locations/*/read",
                                    "Microsoft.Sql/servers/*",



                                    "Microsoft.Network/virtualNetworks/subnets/joinViaServiceEndpoint/action",
                                    "Microsoft.ResourceHealth/availabilityStatuses/read",
                                    "Microsoft.Resources/deployments/*",
                                    "Microsoft.Resources/subscriptions/resourceGroups/read",
                                    "Microsoft.Sql/locations/administratorAzureAsyncOperation/read",
                                    "Microsoft.Sql/managedInstances/databases/currentSensitivityLabels/*",
                                    "Microsoft.Sql/managedInstances/databases/recommendedSensitivityLabels/*",
                                    "Microsoft.Sql/managedInstances/databases/schemas/tables/columns/sensitivityLabels/*",
                                    "Microsoft.Sql/managedInstances/databases/securityAlertPolicies/*",
                                    "Microsoft.Sql/managedInstances/databases/sensitivityLabels/*",
                                    "Microsoft.Sql/managedInstances/databases/vulnerabilityAssessments/*",
                                    "Microsoft.Sql/managedInstances/securityAlertPolicies/*",
                                    "Microsoft.Sql/managedInstances/databases/transparentDataEncryption/*",
                                    "Microsoft.Sql/managedInstances/vulnerabilityAssessments/*",
                                    "Microsoft.Sql/servers/auditingSettings/*",
                                    "Microsoft.Sql/servers/extendedAuditingSettings/read",
                                    "Microsoft.Sql/servers/databases/auditingSettings/*",
                                    "Microsoft.Sql/servers/databases/auditRecords/read",
                                    "Microsoft.Sql/servers/databases/currentSensitivityLabels/*",
                                    "Microsoft.Sql/servers/databases/dataMaskingPolicies/*",
                                    "Microsoft.Sql/servers/databases/extendedAuditingSettings/read",
                                    "Microsoft.Sql/servers/databases/read",
                                    "Microsoft.Sql/servers/databases/recommendedSensitivityLabels/*",
                                    "Microsoft.Sql/servers/databases/schemas/read",
                                    "Microsoft.Sql/servers/databases/schemas/tables/columns/read",
                                    "Microsoft.Sql/servers/databases/schemas/tables/columns/sensitivityLabels/*",
                                    "Microsoft.Sql/servers/databases/schemas/tables/read",
                                    "Microsoft.Sql/servers/databases/securityAlertPolicies/*",
                                    "Microsoft.Sql/servers/databases/securityMetrics/*",
                                    "Microsoft.Sql/servers/databases/sensitivityLabels/*",
                                    "Microsoft.Sql/servers/databases/transparentDataEncryption/*",
                                    "Microsoft.Sql/servers/databases/vulnerabilityAssessments/*",
                                    "Microsoft.Sql/servers/databases/vulnerabilityAssessmentScans/*",
                                    "Microsoft.Sql/servers/databases/vulnerabilityAssessmentSettings/*",
                                    "Microsoft.Sql/servers/devOpsAuditingSettings/*",
                                    "Microsoft.Sql/servers/firewallRules/*",
                                    "Microsoft.Sql/servers/read",
                                    "Microsoft.Sql/servers/securityAlertPolicies/*",
                                    "Microsoft.Sql/servers/vulnerabilityAssessments/*",
                                    "Microsoft.Support/*",
                                    "Microsoft.Sql/servers/azureADOnlyAuthentications/*",
                                    "Microsoft.Sql/managedInstances/read",
                                    "Microsoft.Sql/managedInstances/azureADOnlyAuthentications/*",
                                    "Microsoft.Security/sqlVulnerabilityAssessments/*",
                                    "Microsoft.Sql/managedInstances/administrators/read",
                                    "Microsoft.Sql/servers/administrators/read",
                                    //******************/

                                    "Microsoft.Resources/subscriptions/resourceGroups/read",
                                    "Microsoft.Management/managementGroups/read",
                                    "Microsoft.Resources/deployments/*",
                                    //
                                    "Microsoft.Support/*"
                                ], //,
                                "notActions": [],
                                "dataActions": [],
                                "notDataActions": []
                            }
                        ],
                        "assignableScopes": [
                            "[variables('scope')]"
                        ]
                    },
                    "name": "[variables('databaseerole')]"
                },
                {
                    "properties": {
                        "roleName": "[variables('enablementrole')]",
                        "description": "[variables('enablementroledesc')]",
                        "type": "customRole",
                        "id": "[variables('enablementroleid')]",
                        "IsCustom": true,
                        "permissions": [
                            {
                                "actions": [

                                    "Microsoft.Insights/*",


                                    "Microsoft.Automation/automationAccounts/*",

                                    //******************/

                                    "Microsoft.Resources/subscriptions/resourceGroups/read",
                                    "Microsoft.Management/managementGroups/read",

                                    //
                                    "Microsoft.Support/*"
                                ], //,
                                "notActions": [],
                                "dataActions": [],
                                "notDataActions": []
                            }
                        ],
                        "assignableScopes": [
                            "[variables('scope')]"
                        ]
                    },
                    "name": "[variables('enablementrole')]"
                },
                {
                    "properties": {
                        "roleName": "[variables('devopsrole')]",
                        "description": "[variables('devopsroledesc')]",
                        "type": "customRole",
                        "id": "[variables('devopsroleid')]",
                        "IsCustom": true,
                        "permissions": [
                            {
                                "actions": [

                                    "Microsoft.Insights/*",

                                    //DevTest Labs User
                                    "Microsoft.Authorization/*/read",
                                    "Microsoft.Compute/availabilitySets/read",
                                    "Microsoft.Compute/virtualMachines/*/read",
                                    "Microsoft.Compute/virtualMachines/deallocate/action",
                                    "Microsoft.Compute/virtualMachines/read",
                                    "Microsoft.Compute/virtualMachines/restart/action",
                                    "Microsoft.Compute/virtualMachines/start/action",
                                    "Microsoft.DevTestLab/*/read",
                                    "Microsoft.DevTestLab/labs/claimAnyVm/action",
                                    "Microsoft.DevTestLab/labs/createEnvironment/action",
                                    "Microsoft.DevTestLab/labs/ensureCurrentUserProfile/action",
                                    "Microsoft.DevTestLab/labs/formulas/delete",
                                    "Microsoft.DevTestLab/labs/formulas/read",
                                    "Microsoft.DevTestLab/labs/formulas/write",
                                    "Microsoft.DevTestLab/labs/policySets/evaluatePolicies/action",
                                    "Microsoft.DevTestLab/labs/virtualMachines/claim/action",
                                    "Microsoft.DevTestLab/labs/virtualmachines/listApplicableSchedules/action",
                                    "Microsoft.DevTestLab/labs/virtualMachines/getRdpFileContents/action",
                                    "Microsoft.Network/loadBalancers/backendAddressPools/join/action",
                                    "Microsoft.Network/loadBalancers/inboundNatRules/join/action",
                                    "Microsoft.Network/networkInterfaces/*/read",
                                    "Microsoft.Network/networkInterfaces/join/action",
                                    "Microsoft.Network/networkInterfaces/read",
                                    "Microsoft.Network/networkInterfaces/write",
                                    "Microsoft.Network/publicIPAddresses/*/read",
                                    "Microsoft.Network/publicIPAddresses/join/action",
                                    "Microsoft.Network/publicIPAddresses/read",
                                    "Microsoft.Network/virtualNetworks/subnets/join/action",
                                    "Microsoft.Resources/deployments/operations/read",
                                    "Microsoft.Resources/deployments/read",
                                    "Microsoft.Resources/subscriptions/resourceGroups/read",
                                    "Microsoft.Storage/storageAccounts/listKeys/action",
                                    //Lab Creator

                                    "Microsoft.LabServices/labAccounts/*/read",
                                    "Microsoft.LabServices/labAccounts/createLab/action",
                                    "Microsoft.LabServices/labAccounts/getPricingAndAvailability/action",
                                    "Microsoft.LabServices/labAccounts/getRestrictionsAndUsage/action",


                                    //******************/

                                    "Microsoft.Resources/subscriptions/resourceGroups/read",
                                    "Microsoft.Management/managementGroups/read",

                                    //
                                    "Microsoft.Support/*"
                                ], //,
                                "notActions": [],
                                "dataActions": [],
                                "notDataActions": []
                            }
                        ],
                        "assignableScopes": [
                            "[variables('scope')]"
                        ]
                    },
                    "name": "[variables('devopsrole')]"
                },

                {
                    "properties": {
                        "roleName": "[variables('billingrole')]",
                        "description": "[variables('billingroledesc')]",
                        "type": "customRole",
                        "id": "[variables('billingroleid')]",
                        "IsCustom": true,
                        "permissions": [
                            {
                                "actions": [

                                    "Microsoft.Authorization/*/read",
                                    "Microsoft.Insights/alertRules/*",

                                    //Cost Management Contributor
                                    "Microsoft.Consumption/*",
                                    "Microsoft.CostManagement/*",
                                    "Microsoft.Billing/billingPeriods/read",
                                    "Microsoft.Resources/subscriptions/read",
                                    "Microsoft.Resources/subscriptions/resourceGroups/read",
                                    "Microsoft.Support/*",
                                    "Microsoft.Advisor/configurations/read",
                                    "Microsoft.Advisor/recommendations/read",
                                    //General
                                    "Microsoft.Resources/subscriptions/resourceGroups/read",
                                    "Microsoft.Management/managementGroups/read",

                                    //
                                    "Microsoft.Support/*"
                                ], //,
                                "notActions": [],
                                "dataActions": [],
                                "notDataActions": []
                            }
                        ],
                        "assignableScopes": [
                            "[variables('scope')]"
                        ]
                    },
                    "name": "[variables('billingrole')]"
                },

                {
                    "properties": {
                        "roleName": "[variables('managementrole')]",
                        "description": "[variables('managementroledesc')]",
                        "type": "customRole",
                        "id": "[variables('managementroleid')]",
                        "IsCustom": true,
                        "permissions": [
                            {
                                "actions": [

                                    "Microsoft.Authorization/*/read",
                                    "Microsoft.Insights/alertRules/*",


                                    "Microsoft.Management/managementGroups/*",
                                    "Microsoft.Authorization/*",
                                    "Microsoft.Capacity/*",

                                    "Microsoft.Blueprint/blueprints/*",
                                    "Microsoft.Resources/deployments/*",

                                    //General
                                    "Microsoft.Resources/subscriptions/resourceGroups/read",
                                    "Microsoft.Management/managementGroups/read",

                                    //
                                    "Microsoft.Support/*"
                                ], //,
                                "notActions": [],

                                "notDataActions": [],
                                "dataActions": [
                                    "Microsoft.PolicyInsights/checkDataPolicyCompliance/action",
                                    "Microsoft.PolicyInsights/policyEvents/logDataEvents/action"
                                ]
                            }
                        ],
                        "assignableScopes": [
                            "[variables('scope')]"
                        ]
                    },
                    "name": "[variables('managementrole')]"
                },

                {
                    "properties": {
                        "roleName": "[variables('identityaccessmgnrole')]",
                        "description": "[variables('identityaccessmgnroledesc')]",
                        "type": "customRole",
                        "id": "[variables('identityaccessmgnroleid')]",
                        "IsCustom": true,
                        "permissions": [
                            {
                                "actions": [

                                    "Microsoft.Authorization/*/read",
                                    "Microsoft.Insights/alertRules/*",
                                    "Microsoft.Resources/deployments/*",
                                    //Managed Identity Contributor
                                    "Microsoft.ManagedIdentity/userAssignedIdentities/read",
                                    "Microsoft.ManagedIdentity/userAssignedIdentities/write",
                                    "Microsoft.ManagedIdentity/userAssignedIdentities/delete",


                                    "Microsoft.Blueprint/blueprints/*",
                                    "Microsoft.Resources/deployments/*",

                                    "Microsoft.Management/managementGroups/*",
                                    "Microsoft.Authorization/*",
                                    "Microsoft.Capacity/*",
                                    //Azure AD https://docs.microsoft.com/en-us/azure/active-directory/roles/permissions-reference#billing-administrator
                                    //Azure DevOps Administrator
                                    "microsoft.azure.devOps/allEntities/allTasks",
                                    //Azure Information Protection Administrator
                                    "microsoft.azure.supportTickets/allEntities/allTasks",
                                    "microsoft.azure.serviceHealth/allEntities/allTasks",
                                    //Azure AD Joined Device Local Administrator
                                    "microsoft.directory/groupSettings/standard/read",
                                    "microsoft.directory/groupSettingTemplates/standard/read",
                                    //Authentication Policy Administrator
                                    "microsoft.directory/organization/strongAuthentication/update",
                                    "microsoft.directory/userCredentialPolicies/create",
                                    "microsoft.directory/userCredentialPolicies/delete",
                                    "microsoft.directory/userCredentialPolicies/standard/read",
                                    //"microsoft.directory/userCredentialPolicies/owners/read",
                                    "microsoft.directory/userCredentialPolicies/policyAppliedTo/rea",
                                    "microsoft.directory/userCredentialPolicies/basic/update",
                                    //"microsoft.directory/userCredentialPolicies/owners/update",
                                    "microsoft.directory/userCredentialPolicies/tenantDefault/update",
                                    //Application Developer
                                    "microsoft.directory/applications/createAsOwner",
                                    "microsoft.directory/appRoleAssignments/createAsOwner",
                                    "microsoft.directory/oAuth2PermissionGrants/createAsOwner",
                                    "microsoft.directory/servicePrincipals/createAsOwner",
                                    //Application Administrator
                                    "microsoft.directory/applications/create",
                                    "microsoft.directory/applications/delete",
                                    "microsoft.directory/applications/applicationProxyAuthentication/update",
                                    "microsoft.directory/applications/basic/update",
                                    "microsoft.directory/applications/appRoles/update",
                                    "microsoft.directory/applications/audience/update",
                                    "microsoft.directory/applications/authentication/update",
                                    "microsoft.directory/applications/credentials/update",
                                    "microsoft.directory/applications/owners/update",
                                    "microsoft.directory/applications/policies/update",
                                    "microsoft.directory/applicationPolicies/create",
                                    "microsoft.directory/oAuth2PermissionGrants/allProperties/allTasks",
                                    "microsoft.directory/applicationPolicies/delete",
                                    "microsoft.directory/servicePrincipals/create",
                                    "microsoft.directory/servicePrincipals/enable",
                                    "microsoft.directory/servicePrincipals/getPasswordSingleSignOnCredentials",
                                    "microsoft.directory/servicePrincipals/synchronizationCredentials/manage",
                                    "microsoft.directory/servicePrincipals/synchronizationJobs/manage",
                                    "microsoft.directory/servicePrincipals/synchronizationSchema/manage",
                                    "microsoft.directory/servicePrincipals/permissions/update",
                                    "microsoft.directory/servicePrincipals/policies/update",
                                    "",
                                    "",
                                    "",
                                    "",
                                    "",
                                    "",
                                    "",
                                    "",
                                    "",
                                    "",
                                    "",
                                    "",
                                    "",
                                    //General
                                    "Microsoft.Resources/subscriptions/resourceGroups/read",
                                    "Microsoft.Management/managementGroups/read",

                                    //
                                    "Microsoft.Support/*"
                                ], //,
                                "notActions": [],

                                "notDataActions": [],
                                "dataActions": [
                                    "Microsoft.PolicyInsights/checkDataPolicyCompliance/action",
                                    "Microsoft.PolicyInsights/policyEvents/logDataEvents/action"
                                ]
                            }
                        ],
                        "assignableScopes": [
                            "[variables('scope')]"
                        ]
                    },
                    "name": "[variables('identityaccessmgnrole')]"
                },

                {
                    "properties": {
                        "roleName": "[variables('secyrityopsrole')]",
                        "description": "[variables('secyrityopsroledesc')]",
                        "type": "customRole",
                        "id": "[variables('secyrityopsroleid')]",
                        "IsCustom": true,
                        "permissions": [
                            {
                                "actions": [

                                    "Microsoft.Authorization/*/read",
                                    "Microsoft.Insights/alertRules/*",


                                    // Security Contributor
                                    "Microsoft.Compute/*/read",
                                    "Microsoft.Network/*/read",
                                    "Microsoft.Storage/*/read",
                                    //SQL DB
                                    "Microsoft.Sql/managedInstances/databases/securityAlertPolicies/*",
                                    "Microsoft.Sql/managedInstances/securityAlertPolicies/*",
                                    "Microsoft.Sql/servers/databases/securityAlertPolicies/*",
                                    "Microsoft.Sql/servers/databases/securityMetrics/*",
                                    //NEtwork
                                    "Microsoft.Network/networkSecurityGroups/*",
                                    // SQL Security Manager
                                    "Microsoft.Sql/locations/administratorAzureAsyncOperation/read",
                                    "Microsoft.Sql/managedInstances/databases/currentSensitivityLabels/*",
                                    "Microsoft.Sql/managedInstances/databases/recommendedSensitivityLabels/*",
                                    "Microsoft.Sql/managedInstances/databases/schemas/tables/columns/sensitivityLabels/*",
                                    "Microsoft.Sql/managedInstances/databases/securityAlertPolicies/*",
                                    "Microsoft.Sql/managedInstances/databases/sensitivityLabels/*",
                                    "Microsoft.Sql/managedInstances/databases/vulnerabilityAssessments/*",
                                    "Microsoft.Sql/managedInstances/securityAlertPolicies/*",
                                    "Microsoft.Sql/managedInstances/databases/transparentDataEncryption/*",
                                    "Microsoft.Sql/managedInstances/vulnerabilityAssessments/*",
                                    "Microsoft.Sql/servers/auditingSettings/*",
                                    "Microsoft.Sql/servers/extendedAuditingSettings/read",
                                    "Microsoft.Sql/servers/databases/auditingSettings/*",
                                    "Microsoft.Sql/servers/databases/auditRecords/read",
                                    "Microsoft.Sql/servers/databases/currentSensitivityLabels/*",
                                    "Microsoft.Sql/servers/databases/dataMaskingPolicies/*",
                                    "Microsoft.Sql/servers/databases/extendedAuditingSettings/read",
                                    "Microsoft.Sql/servers/databases/read",
                                    "Microsoft.Sql/servers/databases/recommendedSensitivityLabels/*",
                                    "Microsoft.Sql/servers/databases/schemas/read",
                                    "Microsoft.Sql/servers/databases/schemas/tables/columns/read",
                                    "Microsoft.Sql/servers/databases/schemas/tables/columns/sensitivityLabels/*",
                                    "Microsoft.Sql/servers/databases/schemas/tables/read",
                                    "Microsoft.Sql/servers/databases/securityAlertPolicies/*",
                                    "Microsoft.Sql/servers/databases/securityMetrics/*",
                                    "Microsoft.Sql/servers/databases/sensitivityLabels/*",
                                    "Microsoft.Sql/servers/databases/transparentDataEncryption/*",
                                    "Microsoft.Sql/servers/databases/vulnerabilityAssessments/*",
                                    "Microsoft.Sql/servers/databases/vulnerabilityAssessmentScans/*",
                                    "Microsoft.Sql/servers/databases/vulnerabilityAssessmentSettings/*",
                                    "Microsoft.Sql/servers/devOpsAuditingSettings/*",
                                    "Microsoft.Sql/servers/firewallRules/*",
                                    "Microsoft.Sql/servers/read",
                                    "Microsoft.Sql/servers/securityAlertPolicies/*",
                                    "Microsoft.Sql/servers/vulnerabilityAssessments/*",
                                    "Microsoft.Support/*",
                                    "Microsoft.Sql/servers/azureADOnlyAuthentications/*",
                                    "Microsoft.Sql/managedInstances/read",
                                    "Microsoft.Sql/managedInstances/azureADOnlyAuthentications/*",
                                    "Microsoft.Security/sqlVulnerabilityAssessments/*",
                                    "Microsoft.Sql/managedInstances/administrators/read",

                                    "Microsoft.ResourceHealth/availabilityStatuses/read",

                                    // Azure Sentinel Automation Contributor

                                    "Microsoft.Logic/workflows/triggers/read",
                                    "Microsoft.Logic/workflows/triggers/listCallbackUrl/action",
                                    "Microsoft.Logic/workflows/runs/read",

                                    //Azure Sentinel Contributor
                                    "Microsoft.SecurityInsights/*",
                                    "Microsoft.OperationalInsights/workspaces/analytics/query/action",
                                    "Microsoft.OperationalInsights/workspaces/*/read",
                                    "Microsoft.OperationalInsights/workspaces/savedSearches/*",
                                    "Microsoft.OperationsManagement/solutions/read",
                                    "Microsoft.OperationalInsights/workspaces/query/read",
                                    "Microsoft.OperationalInsights/workspaces/query/*/read",
                                    "Microsoft.OperationalInsights/workspaces/dataSources/read",
                                    "Microsoft.Insights/workbooks/*",
                                    "Microsoft.Insights/myworkbooks/read",

                                    //
                                    "Microsoft.SecurityInsights/*/read",
                                    "Microsoft.SecurityInsights/dataConnectorsCheckRequirements/action",
                                    "Microsoft.SecurityInsights/automationRules/*",
                                    "Microsoft.SecurityInsights/cases/*",
                                    "Microsoft.SecurityInsights/incidents/*",
                                    "Microsoft.SecurityInsights/threatIntelligence/indicators/appendTags/action",
                                    "Microsoft.SecurityInsights/threatIntelligence/indicators/query/action",
                                    "Microsoft.SecurityInsights/threatIntelligence/bulkTag/action",
                                    "Microsoft.SecurityInsights/threatIntelligence/indicators/appendTags/action",
                                    "Microsoft.SecurityInsights/threatIntelligence/indicators/replaceTags/action",
                                    "Microsoft.SecurityInsights/threatIntelligence/queryIndicators/action",
                                    "Microsoft.OperationalInsights/workspaces/analytics/query/action",
                                    "Microsoft.OperationalInsights/workspaces/*/read",
                                    "Microsoft.OperationalInsights/workspaces/dataSources/read",
                                    "Microsoft.OperationalInsights/workspaces/savedSearches/read",
                                    "Microsoft.OperationsManagement/solutions/read",
                                    "Microsoft.OperationalInsights/workspaces/query/read",
                                    "Microsoft.OperationalInsights/workspaces/query/*/read",
                                    "Microsoft.OperationalInsights/workspaces/dataSources/read",

                                    // Security Admin
                                    "Microsoft.Authorization/policyAssignments/*",
                                    "Microsoft.Authorization/policyDefinitions/*",
                                    "Microsoft.Authorization/policyExemptions/*",
                                    "Microsoft.Authorization/policySetDefinitions/*",
                                    "Microsoft.Insights/alertRules/*",
                                    "Microsoft.Management/managementGroups/read",
                                    "Microsoft.Security/*",

                                    //Key Vault Administrator

                                    "Microsoft.KeyVault/checkNameAvailability/read",
                                    "Microsoft.KeyVault/deletedVaults/read",
                                    "Microsoft.KeyVault/locations/*/read",
                                    "Microsoft.KeyVault/vaults/*/read",
                                    "Microsoft.KeyVault/operations/read",


                                    //***************************/
                                    "Microsoft.Resources/deployments/*",
                                    "Microsoft.Resources/subscriptions/resourceGroups/read",

                                    //
                                    "Microsoft.Compute/*/read",
                                    "Microsoft.Network/*/read",
                                    //
                                    "Microsoft.Support/*"
                                ], //,
                                "notActions": [
                                    "Microsoft.SecurityInsights/cases/*/Delete",
                                    "Microsoft.SecurityInsights/incidents/*/Delete"
                                ],
                                "dataActions": [
                                    "Microsoft.KeyVault/vaults/*"
                                ],
                                "notDataActions": []
                            }
                        ],
                        "assignableScopes": [
                            "[variables('scope')]"
                        ]
                    },
                    "name": "[variables('secyrityopsrole')]"
                },
                {
                    "properties": {
                        "roleName": "[variables('networksrole')]",
                        "description": "[variables('networksroledesc')]",
                        "type": "customRole",
                        "id": "[variables('networksroleid')]",
                        "IsCustom": true,
                        "permissions": [
                            {
                                "actions": [

                                    "Microsoft.Authorization/*/read",
                                    "Microsoft.Insights/alertRules/*",


                                    // Network Contributor
                                    "Microsoft.Network/*",
                                    "Microsoft.ResourceHealth/availabilityStatuses/read",

                                    // CDN Endpoint Contributor

                                    "Microsoft.Cdn/edgenodes/read",
                                    "Microsoft.Cdn/operationresults/*",
                                    "Microsoft.Cdn/profiles/endpoints/*",

                                    //***************************/
                                    "Microsoft.Resources/deployments/*",
                                    "Microsoft.Management/managementGroups/read",
                                    "Microsoft.Resources/subscriptions/resourceGroups/read",


                                    //
                                    "Microsoft.Support/*"
                                ], //,
                                "notActions": [],
                                "dataActions": [],
                                "notDataActions": []
                            }
                        ],
                        "assignableScopes": [
                            "[variables('scope')]"
                        ]
                    },
                    "name": "[variables('networksrole')]"
                }
            ]
        }
    },

    "resources": [
        {
            //"condition": "[equals(parameters('enableCustomRBAC'), 'Yes')]",
            "type": "Microsoft.Authorization/roleDefinitions",
            "apiVersion": "2017-09-01",

            "copy": {
                "name": "RBACCustomDefinitionCopy",
                "count": "[length(variables('Role').RoleDefinitions)]"
            },
            "name": "[variables('Role').RoleDefinitions[copyIndex()].name]",
            "properties": {
                "roleName": "[variables('Role').RoleDefinitions[copyIndex()].properties.roleName]",
                "description": "[variables('Role').RoleDefinitions[copyIndex()].properties.description]",
                "type": "customRole",
                "id": "[variables('Role').RoleDefinitions[copyIndex()].properties.id]",
                "IsCustom": true,
                //"permissions": "[variables('Role').RoleDefinitions[copyIndex()].properties.permissions]",
                "permissions": [
                    {
                        "actions": "[variables('Role').RoleDefinitions[copyIndex()].properties.permissions.actions]",
                        "notActions": "[variables('Role').RoleDefinitions[copyIndex()].properties.permissions.notActions]",
                        "dataActions": "[variables('Role').RoleDefinitions[copyIndex()].properties.permissions.dataActions]",
                        "notDataActions": "[variables('Role').RoleDefinitions[copyIndex()].properties.permissions.notDataActions]"
                    }
                ],
                "assignableScopes": "[variables('Role').RoleDefinitions[copyIndex()].properties.assignableScopes]"
            }
        }
    ],

    "outputs": {}
}