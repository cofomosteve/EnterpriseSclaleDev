{
    "handler": "Microsoft.Azure.CreateUIDef",
    "version": "0.1.2-preview",
    "parameters": {
        "basics": [
            {}
        ],
        "steps": [
            {
                "name": "lzSettings",
                "label": "Enterprise-Scale company prefix",
                "subLabel": {
                    "preValidation": "Provide a company prefix for the management group structure that will be created.",
                    "postValidation": "Done"
                },
                "bladeTitle": "Company prefix",
                "elements": [
                    {
                        "name": "infoBox1",
                        "type": "Microsoft.Common.InfoBox",
                        "visible": true,
                        "options": {
                            "icon": "Info",
                            "text": "Enterprise-Scale ARM deployment requires access at the tenant root (/) scope. Visit this link to ensure you have the appropriate RBAC permission to complete the deployment",
                            "uri": "https://docs.microsoft.com/azure/role-based-access-control/elevate-access-global-admin"
                        }
                    },
                    {
                        "name": "textBlock0",
                        "type": "Microsoft.Common.TextBlock",
                        "visible": true,
                        "options": {
                            "text": "Enterprise-Scale will create the management group hierarchy under the Tenant Root Group with the prefix provided at this step.",
                            "link": {
                                "label": "Learn more",
                                "uri": "https://docs.microsoft.com/azure/cloud-adoption-framework/ready/enterprise-scale/management-group-and-subscription-organization"
                            }
                        }
                    },
                    {
                        "name": "esMgmtGroup",
                        "type": "Microsoft.Common.TextBox",
                        "label": "Management Group prefix",
                        "toolTip": "Provide a prefix (max 10 characters, unique at tenant-scope) for the Management Group hierarchy and other resources created as part of Enterprise-scale.",
                        "defaultValue": "",
                        "constraints": {
                            "required": true,
                            "regex": "^[a-z0-9A-Z-]{1,10}$",
                            "validationMessage": "The prefix must be 1-10 characters."
                        }
                    },
                    {
                        "name": "esLocationsApi",
                        "type": "Microsoft.Solutions.ArmApiControl",
                        "request": {
                            "method": "GET",
                            "path": "locations?api-version=2019-11-01"
                        }
                    },
                    
                    {
                        "name": "esNamingConvention",
                        "type": "Microsoft.Common.OptionsGroup",
                        "label": "Convention de Nom",
                        "defaultValue": "OQLF",
                        "toolTip": "Naming convention to apply to ressource name",
                        "constraints": {
                            "allowedValues": [
                                {
                                    "label": "OQLF",
                                    "value": "OQLF"
                                },
                                {
                                    "label": "CAF",
                                    "value": "CAF"
                                }
                            ]
                        }
                    }
                    
                ]
            },
            {
                "name": "esGoalState",
                "label": "Platform management, security, and governance",
                "subLabel": {
                    "preValidation": "",
                    "postValidation": ""
                },
                "bladeTitle": "lzGs",
                "elements": [
                    {
                        "name": "infoBox1",
                        "type": "Microsoft.Common.InfoBox",
                        "visible": true,
                        "options": {
                            "icon": "Info",
                            "text": "To enable platform management, security and governance, you must allocate a management Subscription. Please note, this Subscription will be moved to the platform Management Group, and ARM will deploy a Log Analytics workspace and requisite settings. We recommend using a new Subscription with no existing resources. Note that Azure Policy will be used to govern the configuration for the platform at scale.",
                            "uri": "https://github.com/Azure/Enterprise-Scale/blob/main/docs/reference/Readme.md"
                        }
                    },
                    {
                        "name": "esCustomRbacDefinition",
                        "type": "Microsoft.Common.OptionsGroup",
                        "label": "Deploy Custom Role DÃ©finition to optimize Operational Model",
                        "defaultValue": "Yes (recommended)",
                        "toolTip": "If 'Yes' is selected you will have to ssign user to each Custom RBAC defined",
                        "constraints": {
                            "allowedValues": [
                                {
                                    "label": "Yes (recommended)",
                                    "value": "Yes"
                                },
                                {
                                    "label": "No",
                                    "value": "No"
                                }
                            ]
                        },
                        "visible": true
                    },
                    {
                        "name": "esLogAnalytics",
                        "type": "Microsoft.Common.OptionsGroup",
                        "label": "Deploy Log Analytics workspace and enable monitoring for your platform and resources",
                        "defaultValue": "Yes (recommended)",
                        "toolTip": "If 'Yes' is selected when also adding a subscription for management, ARM will deploy resources and enable them for continious compliance.",
                        "constraints": {
                            "allowedValues": [
                                {
                                    "label": "Yes (recommended)",
                                    "value": "Yes"
                                },
                                {
                                    "label": "No",
                                    "value": "No"
                                }
                            ]
                        },
                        "visible": true
                    },
                    {
                        "name": "esLogRetention",
                        "type": "Microsoft.Common.Slider",
                        "min": 30,
                        "max": 730,
                        "label": "Log Analytics Data Retention (days)",
                        "subLabel": "Days",
                        "defaultValue": 30,
                        "showStepMarkers": false,
                        "toolTip": "Select retention days for Azure logs. Default is 30 days.",
                        "constraints": {
                            "required": false
                        },
                        "visible": "[equals(steps('esGoalState').esLogAnalytics, 'Yes')]"
                    },
                    {
                        "name": "mgmtSubsApi",
                        "type": "Microsoft.Solutions.ArmApiControl",
                        "request": {
                            "method": "GET",
                            "path": "subscriptions?api-version=2020-01-01"
                        }
                    },
                    {
                        "name": "esMgmtSub",
                        "type": "Microsoft.Common.DropDown",
                        "label": "Management subscription",
                        "toolTip": "",
                        "multiselect": false,
                        "selectAll": true,
                        "filter": true,
                        "filterPlaceholder": "Filter items ...",
                        "multiLine": true,
                        "visible": "[equals(steps('esGoalState').esLogAnalytics, 'Yes')]",
                        "constraints": {
                            "allowedValues": "[map(steps('esGoalState').mgmtSubsApi.value, (sub) => parse(concat('{\"label\":\"', sub.displayName, '\",\"description\":\"', sub.subscriptionId, '\",\"value\":\"', toLower(sub.subscriptionId), '\"}')) )]",
                            "required": true
                        }
                    },
                    {
                        "name": "monitoring",
                        "type": "Microsoft.Common.TextBlock",
                        "visible": "[equals(steps('esGoalState').esLogAnalytics, 'Yes')]",
                        "options": {
                            "text": "Select which Azure Monitor solutions you will enable for your Log Analytics workspace",
                            "link": {
                                "label": "Learn more",
                                "uri": "https://docs.microsoft.com/azure/azure-monitor/insights/solutions"
                            }
                        }
                    },
                    {
                        "name": "esAgentSolution",
                        "type": "Microsoft.Common.OptionsGroup",
                        "label": "Deploy Agent Health solution",
                        "defaultValue": "Yes (recommended)",
                        "toolTip": "If 'Yes' is selected when also adding a subscription for management, ARM will deploy resources and enable them for continous compliance",
                        "constraints": {
                            "allowedValues": [
                                {
                                    "label": "Yes (recommended)",
                                    "value": "Yes"
                                },
                                {
                                    "label": "No",
                                    "value": "No"
                                }
                            ]
                        },
                        "visible": "[equals(steps('esGoalState').esLogAnalytics, 'Yes')]"
                    },
                    {
                        "name": "esChangeTracking",
                        "type": "Microsoft.Common.OptionsGroup",
                        "label": "Deploy Change Tracking solution",
                        "defaultValue": "Yes (recommended)",
                        "toolTip": "If 'Yes' is selected when also adding a subscription for management, ARM will deploy resources and enable them for continous compliance",
                        "constraints": {
                            "allowedValues": [
                                {
                                    "label": "Yes (recommended)",
                                    "value": "Yes"
                                },
                                {
                                    "label": "No",
                                    "value": "No"
                                }
                            ]
                        },
                        "visible": "[equals(steps('esGoalState').esLogAnalytics, 'Yes')]"
                    },
                    {
                        "name": "esUpdateMgmt",
                        "type": "Microsoft.Common.OptionsGroup",
                        "label": "Deploy Update Management solution",
                        "defaultValue": "Yes (recommended)",
                        "toolTip": "If 'Yes' is selected when also adding a subscription for management, ARM will deploy resources and enable them for continous compliance",
                        "constraints": {
                            "allowedValues": [
                                {
                                    "label": "Yes (recommended)",
                                    "value": "Yes"
                                },
                                {
                                    "label": "No",
                                    "value": "No"
                                }
                            ]
                        },
                        "visible": "[equals(steps('esGoalState').esLogAnalytics, 'Yes')]"
                    },
                    {
                        "name": "esActivityLog",
                        "type": "Microsoft.Common.OptionsGroup",
                        "label": "Deploy Activity Log solution",
                        "defaultValue": "Yes (recommended)",
                        "toolTip": "If 'Yes' is selected when also adding a subscription for management, ARM will deploy resources and enable them for continous compliance",
                        "constraints": {
                            "allowedValues": [
                                {
                                    "label": "Yes (recommended)",
                                    "value": "Yes"
                                },
                                {
                                    "label": "No",
                                    "value": "No"
                                }
                            ]
                        },
                        "visible": "[equals(steps('esGoalState').esLogAnalytics, 'Yes')]"
                    },
                    {
                        "name": "esVmInsights",
                        "type": "Microsoft.Common.OptionsGroup",
                        "label": "Deploy VM Insights solution",
                        "defaultValue": "Yes (recommended)",
                        "toolTip": "If 'Yes' is selected when also adding a subscription for management, ARM will deploy resources and enable them for continous compliance",
                        "constraints": {
                            "allowedValues": [
                                {
                                    "label": "Yes (recommended)",
                                    "value": "Yes"
                                },
                                {
                                    "label": "No",
                                    "value": "No"
                                }
                            ]
                        },
                        "visible": "[equals(steps('esGoalState').esLogAnalytics, 'Yes')]"
                    },
                    {
                        "name": "esAntiMalware",
                        "type": "Microsoft.Common.OptionsGroup",
                        "label": "Deploy Antimalware solution",
                        "defaultValue": "Yes (recommended)",
                        "toolTip": "If 'Yes' is selected when also adding a subscription for management, ARM will deploy resources and enable them for continous compliance",
                        "constraints": {
                            "allowedValues": [
                                {
                                    "label": "Yes (recommended)",
                                    "value": "Yes"
                                },
                                {
                                    "label": "No",
                                    "value": "No"
                                }
                            ]
                        },
                        "visible": "[equals(steps('esGoalState').esLogAnalytics, 'Yes')]"
                    },
                    {
                        "name": "esServiceMap",
                        "type": "Microsoft.Common.OptionsGroup",
                        "label": "Deploy Service Map solution",
                        "defaultValue": "Yes (recommended)",
                        "toolTip": "If 'Yes' is selected when also adding a subscription for management, ARM will deploy resources and enable them for continous compliance",
                        "constraints": {
                            "allowedValues": [
                                {
                                    "label": "Yes (recommended)",
                                    "value": "Yes"
                                },
                                {
                                    "label": "No",
                                    "value": "No"
                                }
                            ]
                        },
                        "visible": "[equals(steps('esGoalState').esLogAnalytics, 'Yes')]"
                    },
                    {
                        "name": "esSqlAssessment",
                        "type": "Microsoft.Common.OptionsGroup",
                        "label": "Deploy SQL Assessment solution",
                        "defaultValue": "Yes (recommended)",
                        "toolTip": "If 'Yes' is selected when also adding a subscription for management, ARM will deploy resources and enable them for continous compliance",
                        "constraints": {
                            "allowedValues": [
                                {
                                    "label": "Yes (recommended)",
                                    "value": "Yes"
                                },
                                {
                                    "label": "No",
                                    "value": "No"
                                }
                            ]
                        },
                        "visible": "[equals(steps('esGoalState').esLogAnalytics, 'Yes')]"
                    },
                    {
                        "name": "textBlock0",
                        "type": "Microsoft.Common.TextBlock",
                        "visible": "[equals(steps('esGoalState').esLogAnalytics, 'Yes')]",
                        "options": {
                            "text": "Select which Azure Security solutions you will enable.",
                            "link": {
                                "label": "Learn more",
                                "uri": "https://docs.microsoft.com/azure/security/fundamentals/overview"
                            }
                        }
                    },
                    {
                        "name": "esAsc",
                        "type": "Microsoft.Common.OptionsGroup",
                        "label": "Deploy Azure Security Center and enable security monitoring for your platform and resources",
                        "defaultValue": "Yes (recommended)",
                        "toolTip": "If 'Yes' is selected when also adding a subscription for management, ARM will deploy resources and enable them for continous compliance",
                        "constraints": {
                            "allowedValues": [
                                {
                                    "label": "Yes (recommended)",
                                    "value": "Yes"
                                },
                                {
                                    "label": "No",
                                    "value": "No"
                                }
                            ]
                        },
                        "visible": "[equals(steps('esGoalState').esLogAnalytics, 'Yes')]"
                    },
                    {
                        "name": "esAscVms",
                        "type": "Microsoft.Common.OptionsGroup",
                        "label": "Enable Azure Defender for servers",
                        "defaultValue": "Yes (recommended)",
                        "toolTip": "If 'Yes' is selected, Azure Defender will be enabled for all servers.",
                        "visible": "[equals(steps('esGoalState').esAsc, 'Yes')]",
                        "constraints": {
                            "allowedValues": [
                                {
                                    "label": "Yes (recommended)",
                                    "value": "Standard"
                                },
                                {
                                    "label": "No, Azure Defender Off",
                                    "value": "Free"
                                }
                            ]
                        }
                    },
                    {
                        "name": "esAscApps",
                        "type": "Microsoft.Common.OptionsGroup",
                        "label": "Enable Azure Defender for AppServices",
                        "defaultValue": "Yes (recommended)",
                        "toolTip": "If 'Yes' is selected, Azure Defender will be enabled for AppServices.",
                        "visible": "[equals(steps('esGoalState').esAsc, 'Yes')]",
                        "constraints": {
                            "allowedValues": [
                                {
                                    "label": "Yes (recommended)",
                                    "value": "Standard"
                                },
                                {
                                    "label": "No, Azure Defender Off",
                                    "value": "Free"
                                }
                            ]
                        }
                    },
                    {
                        "name": "esAscStorage",
                        "type": "Microsoft.Common.OptionsGroup",
                        "label": "Enable Azure Defender for Storage",
                        "defaultValue": "Yes (recommended)",
                        "toolTip": "If 'Yes' is selected, Azure Defender will be enabled for Storage.",
                        "visible": "[equals(steps('esGoalState').esAsc, 'Yes')]",
                        "constraints": {
                            "allowedValues": [
                                {
                                    "label": "Yes (recommended)",
                                    "value": "Standard"
                                },
                                {
                                    "label": "No, Azure Defender Off",
                                    "value": "Free"
                                }
                            ]
                        }
                    },
                    {
                        "name": "esAscSql",
                        "type": "Microsoft.Common.OptionsGroup",
                        "label": "Enable Azure Defender for SQL",
                        "defaultValue": "Yes (recommended)",
                        "toolTip": "If 'Yes' is selected, Azure Defender will be enabled for SQL.",
                        "visible": "[equals(steps('esGoalState').esAsc, 'Yes')]",
                        "constraints": {
                            "allowedValues": [
                                {
                                    "label": "Yes (recommended)",
                                    "value": "Standard"
                                },
                                {
                                    "label": "No, Azure Defender Off",
                                    "value": "Free"
                                }
                            ]
                        }
                    },
                    {
                        "name": "esAscKeyVault",
                        "type": "Microsoft.Common.OptionsGroup",
                        "label": "Enable Azure Defender for Key Vault",
                        "defaultValue": "Yes (recommended)",
                        "toolTip": "If 'Yes' is selected, Azure Defender will be enabled for Key Vault.",
                        "visible": "[equals(steps('esGoalState').esAsc, 'Yes')]",
                        "constraints": {
                            "allowedValues": [
                                {
                                    "label": "Yes (recommended)",
                                    "value": "Standard"
                                },
                                {
                                    "label": "No, Azure Defender Off",
                                    "value": "Free"
                                }
                            ]
                        }
                    },
                    {
                        "name": "esAscArm",
                        "type": "Microsoft.Common.OptionsGroup",
                        "label": "Enable Azure Defender for Azure Resource Manager",
                        "defaultValue": "Yes (recommended)",
                        "toolTip": "If 'Yes' is selected, Azure Defender will be enabled for Resource Manager.",
                        "visible": "[equals(steps('esGoalState').esAsc, 'Yes')]",
                        "constraints": {
                            "allowedValues": [
                                {
                                    "label": "Yes (recommended)",
                                    "value": "Standard"
                                },
                                {
                                    "label": "No, Azure Defender Off",
                                    "value": "Free"
                                }
                            ]
                        }
                    },
                    {
                        "name": "esAscDns",
                        "type": "Microsoft.Common.OptionsGroup",
                        "label": "Enable Azure Defender for DNS",
                        "defaultValue": "Yes (recommended)",
                        "toolTip": "If 'Yes' is selected, Azure Defender will be enabled for DNS.",
                        "visible": "[equals(steps('esGoalState').esAsc, 'Yes')]",
                        "constraints": {
                            "allowedValues": [
                                {
                                    "label": "Yes (recommended)",
                                    "value": "Standard"
                                },
                                {
                                    "label": "No, Azure Defender Off",
                                    "value": "Free"
                                }
                            ]
                        }
                    },
                    {
                        "name": "esAscKubernetes",
                        "type": "Microsoft.Common.OptionsGroup",
                        "label": "Enable Azure Defender for Kubernetes",
                        "defaultValue": "Yes (recommended)",
                        "toolTip": "If 'Yes' is selected, Azure Defender will be enabled for Kubernetes.",
                        "visible": "[equals(steps('esGoalState').esAsc, 'Yes')]",
                        "constraints": {
                            "allowedValues": [
                                {
                                    "label": "Yes (recommended)",
                                    "value": "Standard"
                                },
                                {
                                    "label": "No, Azure Defender Off",
                                    "value": "Free"
                                }
                            ]
                        }
                    },
                    {
                        "name": "esAscRegistries",
                        "type": "Microsoft.Common.OptionsGroup",
                        "label": "Enable Azure Defender for Container registries",
                        "defaultValue": "Yes (recommended)",
                        "toolTip": "If 'Yes' is selected, Azure Defender will be enabled for Container registries.",
                        "visible": "[equals(steps('esGoalState').esAsc, 'Yes')]",
                        "constraints": {
                            "allowedValues": [
                                {
                                    "label": "Yes (recommended)",
                                    "value": "Standard"
                                },
                                {
                                    "label": "No, Azure Defender Off",
                                    "value": "Free"
                                }
                            ]
                        }
                    },
                    {
                        "name": "esSecuritySolution",
                        "type": "Microsoft.Common.OptionsGroup",
                        "label": "Deploy Azure Sentinel",
                        "defaultValue": "Yes (recommended)",
                        "toolTip": "If 'Yes' is selected when also adding a subscription for management, ARM will deploy resources and enable them for continous compliance",
                        "constraints": {
                            "allowedValues": [
                                {
                                    "label": "Yes (recommended)",
                                    "value": "Yes"
                                },
                                {
                                    "label": "No",
                                    "value": "No"
                                }
                            ]
                        },
                        "visible": "[equals(steps('esGoalState').esLogAnalytics, 'Yes')]"
                    }
                ]
            },
            {
                "name": "esGovernance",
                "label": "Global Policies/Initiative and TAG",
                "subLabel": {
                    "preValidation": "",
                    "postValidation": ""
                },
                "bladeTitle": "lzPolInit",
                "elements": [
                    {
                        "name": "infoBox1",
                        "type": "Microsoft.Common.InfoBox",
                        "visible": true,
                        "options": {
                            "icon": "Info",
                            "text": "POLICIES AND INITIATIVES : This has a global scope application",
                            "uri": ""
                        }
                    },
                    {
                        "name": "esapply-pbmm",
                        "type": "Microsoft.Common.OptionsGroup",
                        "label": "This initiative includes audit and virtual machine extension deployment policies that address a subset of Canada Federal PBMM controls",
                        "defaultValue": "Yes (recommended)",
                        "toolTip": "All policies includes in that Initiative will be applied",
                        "constraints": {
                            "allowedValues": [
                                {
                                    "label": "Yes (recommended)",
                                    "value": "Yes"
                                },
                                {
                                    "label": "No",
                                    "value": "No"
                                }
                            ]
                        },
                        "visible": true
                    },
                    {
                        "name": "eslistOfResourceTypesWithDiagnosticLogsEnabled",
                        "type": "Microsoft.Common.DropDown",
                        "multiselect": true,
                        "selectAll": true,
                        "filter": true,
                        "visible": "[equals(steps('esGovernance').esapply-pbmm, 'Yes')]",
                        "filterPlaceholder": "Filter Resource Type...",
                        "multiLine": true,
                        "label": "TypeResource Type",
                        "toolTip": "List of resource types that should have resource logs enabled",
                        "defaultValue": "*",
                        "constraints": {
                            "allowedValues": [
                                {
                                    "label": "Microsoft.AnalysisServices/servers",
                                    "value": "Microsoft.AnalysisServices/servers"
                                },
                                {
                                    "label": "Microsoft.ApiManagement/service",
                                    "value": "Microsoft.ApiManagement/service"
                                },
                                {
                                    "label": "Microsoft.Network/applicationGateways",
                                    "value": "Microsoft.Network/applicationGateways"
                                },
                                {
                                    "label": "Microsoft.Automation/automationAccounts",
                                    "value": "Microsoft.Automation/automationAccounts"
                                },
                                {
                                    "label": "Microsoft.ContainerInstance/containerGroups",
                                    "value": "Microsoft.ContainerInstance/containerGroups"
                                },
                                {
                                    "label": "Microsoft.ContainerRegistry/registries",
                                    "value": "Microsoft.ContainerRegistry/registries"
                                },
                                {
                                    "label": "Microsoft.ContainerService/managedClusters",
                                    "value": "Microsoft.ContainerService/managedClusters"
                                },
                                {
                                    "label": "Microsoft.Batch/batchAccounts",
                                    "value": "Microsoft.Batch/batchAccounts"
                                },
                                {
                                    "label": "Microsoft.Cdn/profiles/endpoints",
                                    "value": "Microsoft.Cdn/profiles/endpoints"
                                },
                                {
                                    "label": "Microsoft.CognitiveServices/accounts",
                                    "value": "Microsoft.CognitiveServices/accounts"
                                },
                                {
                                    "label": "Microsoft.DocumentDB/databaseAccounts",
                                    "value": "Microsoft.DocumentDB/databaseAccounts"
                                },
                                {
                                    "label": "Microsoft.DataFactory/factories",
                                    "value": "Microsoft.DataFactory/factories"
                                },
                                {
                                    "label": "Microsoft.DataLakeAnalytics/accounts",
                                    "value": "Microsoft.DataLakeAnalytics/accounts"
                                },
                                {
                                    "label": "Microsoft.DataLakeStore/accounts",
                                    "value": "Microsoft.DataLakeStore/accounts"
                                },
                                {
                                    "label": "Microsoft.EventGrid/eventSubscriptions",
                                    "value": "Microsoft.EventGrid/eventSubscriptions"
                                },
                                {
                                    "label": "Microsoft.EventGrid/topics",
                                    "value": "Microsoft.EventGrid/topics"
                                },
                                {
                                    "label": "Microsoft.EventHub/namespaces",
                                    "value": "Microsoft.EventHub/namespaces"
                                },
                                {
                                    "label": "Microsoft.Network/expressRouteCircuits",
                                    "value": "Microsoft.Network/expressRouteCircuits"
                                },
                                {
                                    "label": "Microsoft.Network/azureFirewalls",
                                    "value": "Microsoft.Network/azureFirewalls"
                                },
                                {
                                    "label": "Microsoft.HDInsight/clusters",
                                    "value": "Microsoft.HDInsight/clusters"
                                },
                                {
                                    "label": "Microsoft.Devices/IotHubs",
                                    "value": "Microsoft.Devices/IotHubs"
                                },
                                {
                                    "label": "Microsoft.KeyVault/vaults",
                                    "value": "Microsoft.KeyVault/vaults"
                                },
                                {
                                    "label": "Microsoft.Network/loadBalancers",
                                    "value": "Microsoft.Network/loadBalancers"
                                },
                                {
                                    "label": "Microsoft.Logic/integrationAccounts",
                                    "value": "Microsoft.Logic/integrationAccounts"
                                },
                                {
                                    "label": "Microsoft.Logic/workflows",
                                    "value": "Microsoft.Logic/workflows"
                                },
                                {
                                    "label": "Microsoft.DBforMySQL/servers",
                                    "value": "Microsoft.DBforMySQL/servers"
                                },
                                {
                                    "label": "Microsoft.Network/networkInterfaces",
                                    "value": "Microsoft.Network/networkInterfaces"
                                },
                                {
                                    "label": "Microsoft.Network/networkSecurityGroups",
                                    "value": "Microsoft.Network/networkSecurityGroups"
                                },
                                {
                                    "label": "Microsoft.DBforPostgreSQL/servers",
                                    "value": "Microsoft.DBforPostgreSQL/servers"
                                },
                                {
                                    "label": "Microsoft.PowerBIDedicated/capacities",
                                    "value": "Microsoft.PowerBIDedicated/capacities"
                                },
                                {
                                    "label": "Microsoft.Network/publicIPAddresses",
                                    "value": "Microsoft.Network/publicIPAddresses"
                                },
                                {
                                    "label": "Microsoft.RecoveryServices/vaults",
                                    "value": "Microsoft.RecoveryServices/vaults"
                                },
                                {
                                    "label": "Microsoft.Cache/redis",
                                    "value": "Microsoft.Cache/redis"
                                },
                                {
                                    "label": "Microsoft.Relay/namespaces",
                                    "value": "Microsoft.Relay/namespaces"
                                },
                                {
                                    "label": "Microsoft.Search/searchServices",
                                    "value": "Microsoft.Search/searchServices"
                                },
                                {
                                    "label": "Microsoft.ServiceBus/namespaces",
                                    "value": "Microsoft.ServiceBus/namespaces"
                                },
                                {
                                    "label": "Microsoft.SignalRService/SignalR",
                                    "value": "Microsoft.SignalRService/SignalR"
                                },
                                {
                                    "label": "Microsoft.Sql/servers/databases",
                                    "value": "Microsoft.Sql/servers/databases"
                                },
                                {
                                    "label": "Microsoft.Sql/servers/elasticPools",
                                    "value": "Microsoft.Sql/servers/elasticPools"
                                },
                                {
                                    "label": "Microsoft.StreamAnalytics/streamingjobs",
                                    "value": "Microsoft.StreamAnalytics/streamingjobs"
                                },
                                {
                                    "label": "Microsoft.TimeSeriesInsights/environments",
                                    "value": "Microsoft.TimeSeriesInsights/environments"
                                },
                                {
                                    "label": "Microsoft.Network/trafficManagerProfiles",
                                    "value": "Microsoft.Network/trafficManagerProfiles"
                                },
                                {
                                    "label": "Microsoft.Compute/virtualMachines",
                                    "value": "Microsoft.Compute/virtualMachines"
                                },
                                {
                                    "label": "Microsoft.Compute/virtualMachineScaleSets",
                                    "value": "Microsoft.Compute/virtualMachineScaleSets"
                                },
                                {
                                    "label": "Microsoft.Network/virtualNetworks",
                                    "value": "Microsoft.Network/virtualNetworks"
                                },
                                {
                                    "label": "Microsoft.Network/virtualNetworkGateways",
                                    "value": "Microsoft.Network/virtualNetworkGateways"
                                }
                            ],
                            "required": true
                        }
                    },
                    {
                        "name": "eslistOfMembersToExcludeFromWindowsVMAdministratorsGroup",
                        "type": "Microsoft.Common.TextBox",
                        "label": "Members to exclude",
                        "defaultValue": "AdminExluded",
                        "toolTip": "A semicolon-separated list of members that should be excluded in the Administrators local group. Ex: Administrator; myUser1; myUser2",
                        "placeholder": "",
                        "multiLine": false,
                        "visible": "[equals(steps('esGovernance').esapply-pbmm, 'Yes')]"
                    },
                    {
                        "name": "eslistOfMembersToIncludeInWindowsVMAdministratorsGroup",
                        "type": "Microsoft.Common.TextBox",
                        "label": "Members to include",
                        "defaultValue": "AdminIncluded",
                        "toolTip": "A semicolon-separated list of members that should be included in the Administrators local group. Ex: Administrator; myUser1; myUser2",
                        "placeholder": "",
                        "multiLine": false,
                        "visible": "[equals(steps('esGovernance').esapply-pbmm, 'Yes')]"
                    },
                    {
                        "name": "esapply-kubclust-sec-base-linux-wk",
                        "type": "Microsoft.Common.OptionsGroup",
                        "label": "This initiative includes the policies for the Kubernetes cluster pod security baseline standards",
                        "defaultValue": "Yes (recommended)",
                        "toolTip": "All policies includes in that Initiative will be applied",
                        "constraints": {
                            "allowedValues": [
                                {
                                    "label": "Yes (recommended)",
                                    "value": "Yes"
                                },
                                {
                                    "label": "No",
                                    "value": "No"
                                }
                            ]
                        },
                        "visible": true
                    },
                    {
                        "name": "esapply-kubclust-sec-strict-linux-wk",
                        "type": "Microsoft.Common.OptionsGroup",
                        "label": "This initiative includes the policies for the Kubernetes cluster pod security restricted standards.",
                        "defaultValue": "Yes (recommended)",
                        "toolTip": "All policies includes in that Initiative will be applied",
                        "constraints": {
                            "allowedValues": [
                                {
                                    "label": "Yes (recommended)",
                                    "value": "Yes"
                                },
                                {
                                    "label": "No",
                                    "value": "No"
                                }
                            ]
                        },
                        "visible": true
                    },
                    {
                        "name": "esapply-windows-vm-security-base",
                        "type": "Microsoft.Common.OptionsGroup",
                        "label": "This initiative audits Windows machines with settings that do not meet the Azure security baseline",
                        "defaultValue": "Yes (recommended)",
                        "toolTip": "All policies includes in that Initiative will be applied",
                        "constraints": {
                            "allowedValues": [
                                {
                                    "label": "Yes (recommended)",
                                    "value": "Yes"
                                },
                                {
                                    "label": "No",
                                    "value": "No"
                                }
                            ]
                        },
                        "visible": true
                    },
                    {
                        "name": "esapply-data-protection-suite",
                        "type": "Microsoft.Common.OptionsGroup",
                        "label": "Enable data protection for SQL servers. This initiative is assigned automatically by Azure Security Center Standard Tier",
                        "defaultValue": "Yes (recommended)",
                        "toolTip": "All policies includes in that Initiative will be applied",
                        "constraints": {
                            "allowedValues": [
                                {
                                    "label": "Yes (recommended)",
                                    "value": "Yes"
                                },
                                {
                                    "label": "No",
                                    "value": "No"
                                }
                            ]
                        },
                        "visible": true
                    },
                    {
                        "name": "esapply-flowlog-nsg-iaas",
                        "type": "Microsoft.Common.OptionsGroup",
                        "label": "Audit for network security groups to verify if flow logs are configured and if flow log status is enabled.",
                        "defaultValue": "Yes (recommended)",
                        "toolTip": "All policies includes in that Initiative will be applied",
                        "constraints": {
                            "allowedValues": [
                                {
                                    "label": "Yes (recommended)",
                                    "value": "Yes"
                                },
                                {
                                    "label": "No",
                                    "value": "No"
                                }
                            ]
                        },
                        "visible": true
                    },
                    {
                        "name": "esapply-config-azuremonitor-security-agent-vm-iaas",
                        "type": "Microsoft.Common.OptionsGroup",
                        "label": "Configure machines to automatically install the Azure Monitor and Azure Security agents.",
                        "defaultValue": "Yes (recommended)",
                        "toolTip": "All policies includes in that Initiative will be applied",
                        "constraints": {
                            "allowedValues": [
                                {
                                    "label": "Yes (recommended)",
                                    "value": "Yes"
                                },
                                {
                                    "label": "No",
                                    "value": "No"
                                }
                            ]
                        },
                        "visible": true
                    },
                    {
                        "name": "esapply-vm-insecure-pwd-security-iaas",
                        "type": "Microsoft.Common.OptionsGroup",
                        "label": "This initiative deploys the policy requirements and audits machines with insecure password security settings.",
                        "defaultValue": "Yes (recommended)",
                        "toolTip": "All policies includes in that Initiative will be applied",
                        "constraints": {
                            "allowedValues": [
                                {
                                    "label": "Yes (recommended)",
                                    "value": "Yes"
                                },
                                {
                                    "label": "No",
                                    "value": "No"
                                }
                            ]
                        },
                        "visible": true
                    },
                    {
                        "name": "esapply-deny-public-endpoint-paas",
                        "type": "Microsoft.Common.OptionsGroup",
                        "label": "This policy denies creation of Azure PAAS services with exposed public endpoints.",
                        "defaultValue": "Yes (recommended)",
                        "toolTip": "All policies includes in that Initiative will be applied",
                        "constraints": {
                            "allowedValues": [
                                {
                                    "label": "Yes (recommended)",
                                    "value": "Yes"
                                },
                                {
                                    "label": "No",
                                    "value": "No"
                                }
                            ]
                        },
                        "visible": true
                    },
                    {
                        "name": "esapply-tls-ssl-enforcement-encrypt-paas",
                        "type": "Microsoft.Common.OptionsGroup",
                        "label": "Enforce TLS ncrypt for PaaS",
                        "defaultValue": "Yes (recommended)",
                        "toolTip": "All policies includes in that Initiative will be applied",
                        "constraints": {
                            "allowedValues": [
                                {
                                    "label": "Yes (recommended)",
                                    "value": "Yes"
                                },
                                {
                                    "label": "No",
                                    "value": "No"
                                }
                            ]
                        },
                        "visible": true
                    },
                    {
                        "name": "esapply-audit-resource-without-encryption",
                        "type": "Microsoft.Common.OptionsGroup",
                        "label": "Deny or Audit resources without Encryption with a customer-managed key (CMK).",
                        "defaultValue": "Yes (recommended)",
                        "toolTip": "All policies includes in that Initiative will be applied",
                        "constraints": {
                            "allowedValues": [
                                {
                                    "label": "Yes (recommended)",
                                    "value": "Yes"
                                },
                                {
                                    "label": "No",
                                    "value": "No"
                                }
                            ]
                        },
                        "visible": true
                    },
                    {
                        "name": "infoBoxtag",
                        "type": "Microsoft.Common.InfoBox",
                        "visible": true,
                        "options": {
                            "icon": "Info",
                            "text": "TAG ",
                            "uri": ""
                        }
                    },
                    {
                        "name": "cktagbyresource",
                        "type": "Microsoft.Common.CheckBox",
                        "label": "Add 'CostCenter' Tag and Value by Resource",
                        "defaultValue": true
                    },
                    {
                        "name": "tagcostbyresource",
                        "type": "Microsoft.Common.TagsByResource",
                        "visible": "[equals(steps('esGovernance').cktagbyresource, true)]",
                        "resources": [
                            "Microsoft.*"
                        ]
                    },
                    {
                        "name": "estagauditpolicy",
                        "type": "Microsoft.Common.OptionsGroup",
                        "label": "Add policy to check when those Tag does not exist",
                        "visible": "[equals(steps('esGovernance').cktagbyresource, true)]",
                        "defaultValue": "Yes (recommended)",
                        "toolTip": "Will create a plocies assignment to audit Tag",
                        "constraints": {
                            "allowedValues": [
                                {
                                    "label": "Yes (recommended)",
                                    "value": "Yes"
                                },
                                {
                                    "label": "No",
                                    "value": "No"
                                }
                            ]
                        }
                    }
                ]
            },
            {
                "name": "esConnectivityGoalState",
                "label": "Connectivity (Virtual WAN/Hub & Spoke)",
                "subLabel": {
                    "preValidation": "",
                    "postValidation": ""
                },
                "bladeTitle": "lzGs",
                "elements": [
                    {
                        "name": "infoBox1",
                        "type": "Microsoft.Common.InfoBox",
                        "visible": true,
                        "options": {
                            "icon": "Info",
                            "text": "To enable connectivity, you must allocate a connectivity Subscription. Please note, this Subscription will be moved to the connectivity Management Group, and ARM will deploy either a Virtual WAN with the first Virtual Hub or a Hub & Spoke VNet and requisite settings. We recommend using a new Subscription with no existing resources.",
                            "uri": "https://github.com/Azure/Enterprise-Scale/blob/main/docs/reference/Readme.md"
                        }
                    },
                    {
                        "name": "esConnectivity",
                        "type": "Microsoft.Common.OptionsGroup",
                        "label": "Deploy Connectivity",
                        "defaultValue": "No",
                        "toolTip": "If 'Yes' is selected, tou will choose between WAN and Hub Spoke topology",
                        "constraints": {
                            "allowedValues": [
                                {
                                    "label": "Yes (recommended)",
                                    "value": "Yes"
                                },
                                {
                                    "label": "No",
                                    "value": "No"
                                }
                            ]
                        }
                    },
                    {
                        "name": "esVwan",
                        "type": "Microsoft.Common.OptionsGroup",
                        "label": "Select Topology",
                        "defaultValue": "WAN",
                        "visible": "[equals(steps('esConnectivityGoalState').esConnectivity, 'Yes')]",
                        "toolTip": "If 'Yes' is selected when also adding a subscription for connectivity, ARM will deploy Virtual WAN",
                        "constraints": {
                            "allowedValues": [
                                {
                                    "label": "WAN (recommended for large company)",
                                    "value": "WAN"
                                },
                                {
                                    "label": "HUB & SPOKE (recommended for medium and small company)",
                                    "value": "HUBSPOKE"
                                },
                                {
                                    "label": "Simple VNET (not recommanded or for PaaS Only)",
                                    "value": "VNETBASIC"
                                }
                            ],
                            "required": true
                        }
                    },
                    {
                        "name": "nwSubsApi",
                        "type": "Microsoft.Solutions.ArmApiControl",
                        "request": {
                            "method": "GET",
                            "path": "subscriptions?api-version=2020-01-01"
                        }
                    },
                    {
                        "name": "esConnectivitySub",
                        "type": "Microsoft.Common.DropDown",
                        "label": "Connectivity subscription (required)",
                        "toolTip": "",
                        "multiselect": false,
                        "selectAll": true,
                        "filter": true,
                        "filterPlaceholder": "Filter items ...",
                        "multiLine": true,
                        "visible": "[equals(steps('esConnectivityGoalState').esConnectivity, 'Yes')]",
                        "constraints": {
                            "allowedValues": "[map(steps('esConnectivityGoalState').nwSubsApi.value, (sub) => parse(concat('{\"label\":\"', sub.displayName, '\",\"description\":\"', sub.subscriptionId, '\",\"value\":\"', toLower(sub.subscriptionId), '\"}')) )]",
                            "required": true
                        }
                    },
                    {
                        "name": "esAddress",
                        "type": "Microsoft.Common.TextBox",
                        "label": "Address space (required for Virtual Hub)",
                        "toolTip": "Provide address prefix in CIDR notation (e.g 192.168.0.0/16)",
                        "defaultValue": "192.168.0.0/16",
                        "visible": "[equals(steps('esConnectivityGoalState').esConnectivity, 'Yes')]",
                        "constraints": {
                            "required": true,
                            "validationMessage": "The virtual hubs network's address space, specified as one address prefixes in CIDR notation (e.g. 192.168.0.0/16)"
                        }
                    },
                    {
                        "name": "esLocationsApi",
                        "type": "Microsoft.Solutions.ArmApiControl",
                        "request": {
                            "method": "GET",
                            "path": "locations?api-version=2019-11-01"
                        }
                    },
                    {
                        "name": "esNwLocation",
                        "type": "Microsoft.Common.DropDown",
                        "label": "Region for the first virtual hub",
                        "toolTip": "Select the target region for you connectivity deployment (requires you to provide a subscriptionId for connectivity)",
                        "constraints": {
                            "allowedValues": "[map(steps('esConnectivityGoalState').esLocationsApi.value, (item) => parse(concat('{\"label\":\"', item.displayName, '\",\"value\":\"', item.name, '\"}')))]",
                            "required": true
                        },
                        "visible": "[equals(steps('esConnectivityGoalState').esConnectivity, 'Yes')]"
                    },
                    {
                        "name": "esVpnGw",
                        "type": "Microsoft.Common.OptionsGroup",
                        "label": "Deploy VPN Gateway",
                        "defaultValue": "No",
                        "visible": "[equals(steps('esConnectivityGoalState').esConnectivity, 'Yes')]",
                        "toolTip": "If 'Yes' is selected when also adding a subscription for connectivity, ARM will deploy VPN gateway",
                        "constraints": {
                            "allowedValues": [
                                {
                                    "label": "Yes",
                                    "value": "Yes"
                                },
                                {
                                    "label": "No",
                                    "value": "No"
                                }
                            ]
                        }
                    },
                    {
                        "name": "esErGw",
                        "type": "Microsoft.Common.OptionsGroup",
                        "label": "Deploy ExpressRoute Gateway",
                        "defaultValue": "No",
                        "visible": "[equals(steps('esConnectivityGoalState').esConnectivity, 'Yes')]",
                        "toolTip": "If 'Yes' is selected when also adding a subscription for connectivity, ARM will deploy Express Route gateway",
                        "constraints": {
                            "allowedValues": [
                                {
                                    "label": "Yes",
                                    "value": "Yes"
                                },
                                {
                                    "label": "No",
                                    "value": "No"
                                }
                            ]
                        }
                    },
                    {
                        "name": "esAzFw",
                        "type": "Microsoft.Common.OptionsGroup",
                        "label": "Deploy Azure Firewall",
                        "defaultValue": "No",
                        "visible": "[equals(steps('esConnectivityGoalState').esConnectivity, 'Yes')]",
                        "toolTip": "If 'Yes' is selected when also adding a subscription for connectivity, ARM will deploy Azure Firewall",
                        "constraints": {
                            "allowedValues": [
                                {
                                    "label": "Yes (recommended)",
                                    "value": "Yes"
                                },
                                {
                                    "label": "No",
                                    "value": "No"
                                }
                            ]
                        }
                    }
                ]
            },
            {
                "name": "esIdentityGoalState",
                "label": "Identity",
                "subLabel": {
                    "preValidation": "",
                    "postValidation": ""
                },
                "bladeTitle": "lzGs",
                "elements": [
                    {
                        "name": "infoBox1",
                        "type": "Microsoft.Common.InfoBox",
                        "visible": true,
                        "options": {
                            "icon": "Info",
                            "text": "To enable identity (AuthN/AuthZ) for workloads in landing zones, you must allocate an identity Subscription that is dedicated to host your Active Directory domain controllers. Please note, this Subscription will be moved to the identity Management Group, and ARM will assign the selected policies. We recommend using a new Subscription with no existing resources.",
                            "uri": "https://github.com/Azure/Enterprise-Scale/blob/main/docs/reference/Readme.md"
                        }
                    },
                    {
                        "name": "esIdentity",
                        "type": "Microsoft.Common.OptionsGroup",
                        "label": "Enable identity subscription",
                        "defaultValue": "Yes (recommended)",
                        "toolTip": "If 'Yes' is selected when also adding a subscription for connectivity, ARM will move selected subscription into identity management group",
                        "constraints": {
                            "allowedValues": [
                                {
                                    "label": "Yes (recommended)",
                                    "value": "Yes"
                                },
                                {
                                    "label": "No",
                                    "value": "No"
                                }
                            ]
                        },
                        "visible": true
                    },
                    {
                        "name": "esIdentitySubsApi",
                        "type": "Microsoft.Solutions.ArmApiControl",
                        "request": {
                            "method": "GET",
                            "path": "subscriptions?api-version=2020-01-01"
                        }
                    },
                    {
                        "name": "esIdentitySub",
                        "type": "Microsoft.Common.DropDown",
                        "label": "Identity subscription",
                        "toolTip": "",
                        "multiselect": false,
                        "selectAll": true,
                        "filter": true,
                        "filterPlaceholder": "Filter items ...",
                        "multiLine": true,
                        "visible": "[equals(steps('esIdentityGoalState').esIdentity, 'Yes')]",
                        "constraints": {
                            "allowedValues": "[map(steps('esIdentityGoalState').esIdentitySubsApi.value, (sub) => parse(concat('{\"label\":\"', sub.displayName, '\",\"description\":\"', sub.subscriptionId, '\",\"value\":\"', toLower(sub.subscriptionId), '\"}')) )]",
                            "required": true
                        }
                    },
                    {
                        "name": "identitypolicies",
                        "type": "Microsoft.Common.TextBlock",
                        "visible": "[equals(steps('esIdentityGoalState').esIdentity, 'Yes')]",
                        "options": {
                            "text": "Select which of the the recommended policies you will assign to your identity management group.",
                            "link": {
                                "label": "Learn more",
                                "uri": "https://docs.microsoft.com/en-us/azure/cloud-adoption-framework/ready/enterprise-scale/design-principles#policy-driven-governance"
                            }
                        }
                    },
                    {
                        "name": "esIdDenyRdp",
                        "type": "Microsoft.Common.OptionsGroup",
                        "label": "Prevent inbound RDP from internet",
                        "defaultValue": "Yes (recommended)",
                        "toolTip": "If 'Yes' is selected, Azure Policy will be assigned and prevent inbound RDP from internet",
                        "constraints": {
                            "allowedValues": [
                                {
                                    "label": "Yes (recommended)",
                                    "value": "Yes"
                                },
                                {
                                    "label": "No",
                                    "value": "No"
                                }
                            ]
                        },
                        "visible": "[equals(steps('esIdentityGoalState').esIdentity, 'Yes')]"
                    },
                    {
                        "name": "esIdDenySubnetNsg",
                        "type": "Microsoft.Common.OptionsGroup",
                        "label": "Ensure subnets are associated with NSG",
                        "defaultValue": "Yes (recommended)",
                        "toolTip": "If 'Yes' is selected, Azure Policy will be assigned to ensure NSGs must be associated with subnets being created",
                        "constraints": {
                            "allowedValues": [
                                {
                                    "label": "Yes (recommended)",
                                    "value": "Yes"
                                },
                                {
                                    "label": "No",
                                    "value": "No"
                                }
                            ]
                        },
                        "visible": "[equals(steps('esIdentityGoalState').esIdentity, 'Yes')]"
                    },
                    {
                        "name": "esIdDenyPublicIp",
                        "type": "Microsoft.Common.OptionsGroup",
                        "label": "Prevent usage of public IP",
                        "defaultValue": "Yes (recommended)",
                        "toolTip": "If 'Yes' is selected, Azure Policy will be assigned to ensure public IP resources cannot be created",
                        "constraints": {
                            "allowedValues": [
                                {
                                    "label": "Yes (recommended)",
                                    "value": "Yes"
                                },
                                {
                                    "label": "No",
                                    "value": "No"
                                }
                            ]
                        },
                        "visible": "[equals(steps('esIdentityGoalState').esIdentity, 'Yes')]"
                    },
                    {
                        "name": "esIdAzBackup",
                        "type": "Microsoft.Common.OptionsGroup",
                        "label": "Ensure Azure VMs (Windows & Linux) are enabled for Azure Backup",
                        "defaultValue": "Yes (recommended)",
                        "toolTip": "If 'Yes' is selected, Azure Policy will be assigned and enable Azure Backup on all VMs in the landing zones.",
                        "constraints": {
                            "allowedValues": [
                                {
                                    "label": "Yes (recommended)",
                                    "value": "Yes"
                                },
                                {
                                    "label": "No",
                                    "value": "No"
                                }
                            ]
                        },
                        "visible": "[equals(steps('esIdentityGoalState').esIdentity, 'Yes')]"
                    }
                ]
            },
            {
                "name": "lzGoalState",
                "label": "Landing zone configuration",
                "subLabel": {
                    "preValidation": "",
                    "postValidation": ""
                },
                "bladeTitle": "lzGs",
                "elements": [
                    {
                        "name": "infoBox1",
                        "type": "Microsoft.Common.InfoBox",
                        "visible": true,
                        "options": {
                            "icon": "Info",
                            "text": "You can optionally provide subscriptions for your first landing zones for both 'online' and 'corp' and assign recommended policies that will ensure workloads will be secure, monitored, and protected according to best practices.",
                            "uri": "https://github.com/Azure/Enterprise-Scale/blob/main/docs/Deploy/ES-schema.md"
                        }
                    },
                    {
                        "name": "onlineText",
                        "type": "Microsoft.Common.TextBlock",
                        "visible": "[equals(steps('esGoalState').esLogAnalytics, 'Yes')]",
                        "options": {
                            "text": "Select the subscriptions you want to move to online management group.",
                            "link": {
                                "label": "Learn more",
                                "uri": "https://docs.microsoft.com/azure/azure-monitor/insights/solutions"
                            }
                        }
                    },
                    {
                        "name": "lzOnlineSubsApi",
                        "type": "Microsoft.Solutions.ArmApiControl",
                        "request": {
                            "method": "GET",
                            "path": "subscriptions?api-version=2020-01-01"
                        }
                    },
                    {
                        "name": "esOnlineLzSub",
                        "type": "Microsoft.Common.DropDown",
                        "label": "Online landing zone subscriptions (optional)",
                        "toolTip": "",
                        "multiselect": true,
                        "selectAll": true,
                        "filter": true,
                        "filterPlaceholder": "Filter items ...",
                        "multiLine": true,
                        "visible": true,
                        "constraints": {
                            "allowedValues": "[map(steps('lzGoalState').lzOnlineSubsApi.value, (sub) => parse(concat('{\"label\":\"', sub.displayName, '\",\"description\":\"', sub.subscriptionId, '\",\"value\":\"', toLower(sub.subscriptionId), '\"}')) )]",
                            "required": false
                        }
                    },
                    {
                        "name": "corpText",
                        "type": "Microsoft.Common.TextBlock",
                        "visible": "[equals(steps('esGoalState').esLogAnalytics, 'Yes')]",
                        "options": {
                            "text": "Select the subscriptions you want to move to corp management group.",
                            "link": {
                                "label": "Learn more",
                                "uri": "https://docs.microsoft.com/azure/azure-monitor/insights/solutions"
                            }
                        }
                    },
                    {
                        "name": "lzCorpSubsApi",
                        "type": "Microsoft.Solutions.ArmApiControl",
                        "request": {
                            "method": "GET",
                            "path": "subscriptions?api-version=2020-01-01"
                        }
                    },
                    {
                        "name": "esCorpLzSub",
                        "type": "Microsoft.Common.DropDown",
                        "label": "Corp landing zone subscriptions (optional)",
                        "toolTip": "",
                        "multiselect": true,
                        "selectAll": true,
                        "filter": true,
                        "filterPlaceholder": "Filter items ...",
                        "multiLine": true,
                        "visible": true,
                        "constraints": {
                            "allowedValues": "[map(steps('lzGoalState').lzCorpSubsApi.value, (sub) => parse(concat('{\"label\":\"', sub.displayName, '\",\"description\":\"', sub.subscriptionId, '\",\"value\":\"', toLower(sub.subscriptionId), '\"}')) )]",
                            "required": false
                        }
                    }
                    ,
                    {
                        "name": "DevOpsText",
                        "type": "Microsoft.Common.TextBlock",
                        
                        "options": {
                            "text": "Select the subscriptions you want to move to DevOps management group.",
                            "link": {
                                "label": "Learn more",
                                "uri": "https://docs.microsoft.com/azure/azure-monitor/insights/solutions"
                            }
                        }
                    },
                    {
                        "name": "lzDevOpsSubsApi",
                        "type": "Microsoft.Solutions.ArmApiControl",
                        "request": {
                            "method": "GET",
                            "path": "subscriptions?api-version=2020-01-01"
                        }
                    },
                    {
                        "name": "esDevOpsLzSub",
                        "type": "Microsoft.Common.DropDown",
                        "label": "DevOps landing zone subscriptions (optional)",
                        "toolTip": "",
                        "multiselect": true,
                        "selectAll": true,
                        "filter": true,
                        "filterPlaceholder": "Filter items ...",
                        "multiLine": true,
                        "visible": true,
                        "constraints": {
                            "allowedValues": "[map(steps('lzGoalState').lzDevOpsSubsApi.value, (sub) => parse(concat('{\"label\":\"', sub.displayName, '\",\"description\":\"', sub.subscriptionId, '\",\"value\":\"', toLower(sub.subscriptionId), '\"}')) )]",
                            "required": false
                        }
                    },
                    {
                        "name": "azMonText",
                        "type": "Microsoft.Common.TextBlock",
                        "visible": true,
                        "options": {
                            "text": "Select which of the the recommended policies you will assign to your landing zones.",
                            "link": {
                                "label": "Learn more",
                                "uri": "https://docs.microsoft.com/en-us/azure/cloud-adoption-framework/ready/enterprise-scale/design-principles#policy-driven-governance"
                            }
                        }
                    },
                    {
                        "name": "esVmMonitoring",
                        "type": "Microsoft.Common.OptionsGroup",
                        "label": "Ensure Azure VMs (Windows & Linux) are being monitored",
                        "defaultValue": "Yes (recommended)",
                        "toolTip": "If 'Yes' is selected when also adding a subscription for management, ARM will deploy resources and enable them for continous compliance",
                        "constraints": {
                            "allowedValues": [
                                {
                                    "label": "Yes (recommended)",
                                    "value": "Yes"
                                },
                                {
                                    "label": "No",
                                    "value": "No"
                                }
                            ]
                        },
                        "visible": "[equals(steps('esGoalState').esLogAnalytics, 'Yes')]"
                    },
                    {
                        "name": "esVmssMonitoring",
                        "type": "Microsoft.Common.OptionsGroup",
                        "label": "Ensure Azure VMSS (Windows & Linux) are being monitored",
                        "defaultValue": "Yes (recommended)",
                        "toolTip": "If 'Yes' is selected when also adding a subscription for management, ARM will deploy resources and enable them for continous compliance",
                        "constraints": {
                            "allowedValues": [
                                {
                                    "label": "Yes (recommended)",
                                    "value": "Yes"
                                },
                                {
                                    "label": "No",
                                    "value": "No"
                                }
                            ]
                        },
                        "visible": "[equals(steps('esGoalState').esLogAnalytics, 'Yes')]"
                    },
                    {
                        "name": "esArcVmMonitoring",
                        "type": "Microsoft.Common.OptionsGroup",
                        "label": "Ensure Azure Arc VMs (Windows & Linux) are being monitored",
                        "defaultValue": "Yes (recommended)",
                        "toolTip": "If 'Yes' is selected when also adding a subscription for management, ARM will deploy resources and enable them for continous compliance",
                        "constraints": {
                            "allowedValues": [
                                {
                                    "label": "Yes (recommended)",
                                    "value": "Yes"
                                },
                                {
                                    "label": "No",
                                    "value": "No"
                                }
                            ]
                        },
                        "visible": "[equals(steps('esGoalState').esLogAnalytics, 'Yes')]"
                    },
                    {
                        "name": "esAksPolicy",
                        "type": "Microsoft.Common.OptionsGroup",
                        "label": "Enable Kubernetes (AKS) for Azure Policy",
                        "defaultValue": "Yes (recommended)",
                        "toolTip": "If 'Yes' is selected when also adding a subscription for management, ARM will deploy resources and enable them for continous compliance",
                        "constraints": {
                            "allowedValues": [
                                {
                                    "label": "Yes (recommended)",
                                    "value": "Yes"
                                },
                                {
                                    "label": "No",
                                    "value": "No"
                                }
                            ]
                        },
                        "visible": true
                    },
                    {
                        "name": "esAksPriv",
                        "type": "Microsoft.Common.OptionsGroup",
                        "label": "Prevent privileged containers in Kubernetes clusters",
                        "defaultValue": "Yes (recommended)",
                        "toolTip": "If 'Yes' is selected, policy will be assigned to prevent privileged containers in AKS",
                        "constraints": {
                            "allowedValues": [
                                {
                                    "label": "Yes (recommended)",
                                    "value": "Yes"
                                },
                                {
                                    "label": "No",
                                    "value": "No"
                                }
                            ]
                        },
                        "visible": true
                    },
                    {
                        "name": "esAksNoPriv",
                        "type": "Microsoft.Common.OptionsGroup",
                        "label": "Prevent privileged escalation in Kubernetes clusters",
                        "defaultValue": "Yes (recommended)",
                        "toolTip": "If 'Yes' is selected, policy will be assigned to prevent privileged escalations in AKS",
                        "constraints": {
                            "allowedValues": [
                                {
                                    "label": "Yes (recommended)",
                                    "value": "Yes"
                                },
                                {
                                    "label": "No",
                                    "value": "No"
                                }
                            ]
                        },
                        "visible": true
                    },
                    {
                        "name": "esAksIngress",
                        "type": "Microsoft.Common.OptionsGroup",
                        "label": "Ensure HTTPS ingress is enforced in Kubernetes clusters",
                        "defaultValue": "Yes (recommended)",
                        "toolTip": "If 'Yes' is selected, HTTPS ingress will be required in AKS",
                        "constraints": {
                            "allowedValues": [
                                {
                                    "label": "Yes (recommended)",
                                    "value": "Yes"
                                },
                                {
                                    "label": "No",
                                    "value": "No"
                                }
                            ]
                        },
                        "visible": true
                    },
                    {
                        "name": "esAzBackup",
                        "type": "Microsoft.Common.OptionsGroup",
                        "label": "Ensure Azure VMs (Windows & Linux) are enabled for Azure Backup",
                        "defaultValue": "Yes (recommended)",
                        "toolTip": "If 'Yes' is selected, Azure Policy will be assigned and enable Azure Backup on all VMs in the landing zones.",
                        "constraints": {
                            "allowedValues": [
                                {
                                    "label": "Yes (recommended)",
                                    "value": "Yes"
                                },
                                {
                                    "label": "No",
                                    "value": "No"
                                }
                            ]
                        },
                        "visible": true
                    },
                    {
                        "name": "esDenyRdp",
                        "type": "Microsoft.Common.OptionsGroup",
                        "label": "Prevent inbound RDP from internet",
                        "defaultValue": "Yes (recommended)",
                        "toolTip": "If 'Yes' is selected, Azure Policy will be assigned and prevent inbound RDP from internet",
                        "constraints": {
                            "allowedValues": [
                                {
                                    "label": "Yes (recommended)",
                                    "value": "Yes"
                                },
                                {
                                    "label": "No",
                                    "value": "No"
                                }
                            ]
                        },
                        "visible": true
                    },
                    {
                        "name": "esNsg",
                        "type": "Microsoft.Common.OptionsGroup",
                        "label": "Ensure subnets are associated with NSG",
                        "defaultValue": "Yes (recommended)",
                        "toolTip": "If 'Yes' is selected, Azure Policy will be assigned to ensure NSGs must be associated with subnets being created",
                        "constraints": {
                            "allowedValues": [
                                {
                                    "label": "Yes (recommended)",
                                    "value": "Yes"
                                },
                                {
                                    "label": "No",
                                    "value": "No"
                                }
                            ]
                        },
                        "visible": true
                    },
                    {
                        "name": "esIpForwarding",
                        "type": "Microsoft.Common.OptionsGroup",
                        "label": "Prevent IP forwarding",
                        "defaultValue": "Yes (recommended)",
                        "toolTip": "If 'Yes' is selected, Azure Policy will be assigned and prevent IP forwarding",
                        "constraints": {
                            "allowedValues": [
                                {
                                    "label": "Yes (recommended)",
                                    "value": "Yes"
                                },
                                {
                                    "label": "No",
                                    "value": "No"
                                }
                            ]
                        },
                        "visible": true
                    },
                    {
                        "name": "esSqlEncryption",
                        "type": "Microsoft.Common.OptionsGroup",
                        "label": "Ensure Azure SQL is enabled with transparent data encryption",
                        "defaultValue": "Yes (recommended)",
                        "toolTip": "If 'Yes' is selected when also adding a subscription for management, ARM will deploy resources and enable them for continous compliance",
                        "constraints": {
                            "allowedValues": [
                                {
                                    "label": "Yes (recommended)",
                                    "value": "Yes"
                                },
                                {
                                    "label": "No",
                                    "value": "No"
                                }
                            ]
                        },
                        "visible": true
                    },
                    {
                        "name": "esSqlAudit",
                        "type": "Microsoft.Common.OptionsGroup",
                        "label": "Ensure auditing is enabled on Azure SQL",
                        "defaultValue": "Yes (recommended)",
                        "toolTip": "If 'Yes' is selected, Azure Policy will be assigned to ensure auditing is enabled on Azure SQLs",
                        "constraints": {
                            "allowedValues": [
                                {
                                    "label": "Yes (recommended)",
                                    "value": "Yes"
                                },
                                {
                                    "label": "No",
                                    "value": "No"
                                }
                            ]
                        },
                        "visible": true
                    },
                    {
                        "name": "esHttpsStorage",
                        "type": "Microsoft.Common.OptionsGroup",
                        "label": "Ensure secure connections (HTTPS) to storage accounts",
                        "defaultValue": "Yes (recommended)",
                        "toolTip": "If 'Yes' is selected, Azure Policy will be assigned to ensure storage can only be accessed using HTTPS",
                        "constraints": {
                            "allowedValues": [
                                {
                                    "label": "Yes (recommended)",
                                    "value": "Yes"
                                },
                                {
                                    "label": "No",
                                    "value": "No"
                                }
                            ]
                        },
                        "visible": true
                    },
                    {
                        "name": "esvirtualMachineSize",
                        "type": "Microsoft.Common.DropDown",
                        "multiselect": true,
                        "selectAll": true,
                        "filter": true,
                        "filterPlaceholder": "Filtrer les VM Size...",
                        "multiLine": true,
                        "label": "Virtual machine size",
                        "toolTip": "Size of the virtual machines to deploy. Not all VM sizes are supported by this Azure Marketplace offer however all VM sizes are supported when using other deployment options, see <a target='_blank' href='https://aka.ms/wvdmpsupportedsku'>https://aka.ms/wvdmpsupportedsku</a> for more information.",
                        "defaultValue": "*",
                        "constraints": {
                            "allowedValues": [
                                {
                                    "label": "Standard_A1_v2",
                                    "value": "Standard_A1_v2"
                                },
                                {
                                    "label": "Standard_A2_v2",
                                    "value": "Standard_A2_v2"
                                },
                                {
                                    "label": "Standard_A2m_v2",
                                    "value": "Standard_A2m_v2"
                                },
                                {
                                    "label": "Standard_A4_v2",
                                    "value": "Standard_A4_v2"
                                },
                                {
                                    "label": "Standard_A4m_v2",
                                    "value": "Standard_A4m_v2"
                                },
                                {
                                    "label": "Standard_A8_v2",
                                    "value": "Standard_A8_v2"
                                },
                                {
                                    "label": "Standard_A8m_v2",
                                    "value": "Standard_A8m_v2"
                                },
                                {
                                    "label": "Standard_B1ms",
                                    "value": "Standard_B1ms"
                                },
                                {
                                    "label": "Standard_B1s",
                                    "value": "Standard_B1s"
                                },
                                {
                                    "label": "Standard_B2ms",
                                    "value": "Standard_B2ms"
                                },
                                {
                                    "label": "Standard_B2s",
                                    "value": "Standard_B2s"
                                },
                                {
                                    "label": "Standard_B4ms",
                                    "value": "Standard_B4ms"
                                },
                                {
                                    "label": "Standard_B8ms",
                                    "value": "Standard_B8ms"
                                },
                                {
                                    "label": "Standard_D2_v3",
                                    "value": "Standard_D2_v3"
                                },
                                {
                                    "label": "Standard_D2s_v3",
                                    "value": "Standard_D2s_v3"
                                },
                                {
                                    "label": "Standard_D4_v3",
                                    "value": "Standard_D4_v3"
                                },
                                {
                                    "label": "Standard_D4s_v3",
                                    "value": "Standard_D4s_v3"
                                },
                                {
                                    "label": "Standard_D8_v3",
                                    "value": "Standard_D8_v3"
                                },
                                {
                                    "label": "Standard_D8s_v3",
                                    "value": "Standard_D8s_v3"
                                },
                                {
                                    "label": "Standard_D16_v3",
                                    "value": "Standard_D16_v3"
                                },
                                {
                                    "label": "Standard_D16s_v3",
                                    "value": "Standard_D16s_v3"
                                },
                                {
                                    "label": "Standard_D32_v3",
                                    "value": "Standard_D32_v3"
                                },
                                {
                                    "label": "Standard_D32s_v3",
                                    "value": "Standard_D32s_v3"
                                },
                                {
                                    "label": "Standard_D64_v3",
                                    "value": "Standard_D64_v3"
                                },
                                {
                                    "label": "Standard_D64s_v3",
                                    "value": "Standard_D64s_v3"
                                },
                                {
                                    "label": "Standard_E2_v3",
                                    "value": "Standard_E2_v3"
                                },
                                {
                                    "label": "Standard_E2s_v3",
                                    "value": "Standard_E2s_v3"
                                },
                                {
                                    "label": "Standard_E4_v3",
                                    "value": "Standard_E4_v3"
                                },
                                {
                                    "label": "Standard_E4s_v3",
                                    "value": "Standard_E4s_v3"
                                },
                                {
                                    "label": "Standard_E8_v3",
                                    "value": "Standard_E8_v3"
                                },
                                {
                                    "label": "Standard_E8s_v3",
                                    "value": "Standard_E8s_v3"
                                },
                                {
                                    "label": "Standard_E16_v3",
                                    "value": "Standard_E16_v3"
                                },
                                {
                                    "label": "Standard_E16s_v3",
                                    "value": "Standard_E16s_v3"
                                },
                                {
                                    "label": "Standard_E20_v3",
                                    "value": "Standard_E20_v3"
                                },
                                {
                                    "label": "Standard_E20s_v3",
                                    "value": "Standard_E20s_v3"
                                },
                                {
                                    "label": "Standard_E32_v3",
                                    "value": "Standard_E32_v3"
                                },
                                {
                                    "label": "Standard_E32s_v3",
                                    "value": "Standard_E32s_v3"
                                },
                                {
                                    "label": "Standard_E64_v3",
                                    "value": "Standard_E64_v3"
                                },
                                {
                                    "label": "Standard_E64s_v3",
                                    "value": "Standard_E64s_v3"
                                },
                                {
                                    "label": "Standard_F1",
                                    "value": "Standard_F1"
                                },
                                {
                                    "label": "Standard_F1s",
                                    "value": "Standard_F1s"
                                },
                                {
                                    "label": "Standard_F2",
                                    "value": "Standard_F2"
                                },
                                {
                                    "label": "Standard_F2s",
                                    "value": "Standard_F2s"
                                },
                                {
                                    "label": "Standard_F2s_v2",
                                    "value": "Standard_F2s_v2"
                                },
                                {
                                    "label": "Standard_F4",
                                    "value": "Standard_F4"
                                },
                                {
                                    "label": "Standard_F4s",
                                    "value": "Standard_F4s"
                                },
                                {
                                    "label": "Standard_F4s_v2",
                                    "value": "Standard_F4s_v2"
                                },
                                {
                                    "label": "Standard_F8",
                                    "value": "Standard_F8"
                                },
                                {
                                    "label": "Standard_F8s",
                                    "value": "Standard_F8s"
                                },
                                {
                                    "label": "Standard_F8s_v2",
                                    "value": "Standard_F8s_v2"
                                },
                                {
                                    "label": "Standard_F16",
                                    "value": "Standard_F16"
                                },
                                {
                                    "label": "Standard_F16s",
                                    "value": "Standard_F16s"
                                },
                                {
                                    "label": "Standard_F16s_v2",
                                    "value": "Standard_F16s_v2"
                                },
                                {
                                    "label": "Standard_F32s_v2",
                                    "value": "Standard_F32s_v2"
                                },
                                {
                                    "label": "Standard_F64s_v2",
                                    "value": "Standard_F64s_v2"
                                },
                                {
                                    "label": "Standard_F72s_v2",
                                    "value": "Standard_F72s_v2"
                                },
                                {
                                    "label": "Standard_H8",
                                    "value": "Standard_H8"
                                },
                                {
                                    "label": "Standard_H8m",
                                    "value": "Standard_H8m"
                                },
                                {
                                    "label": "Standard_H16",
                                    "value": "Standard_H16"
                                },
                                {
                                    "label": "Standard_H16m",
                                    "value": "Standard_H16m"
                                },
                                {
                                    "label": "Standard_H16r",
                                    "value": "Standard_H16r"
                                },
                                {
                                    "label": "Standard_H16mr",
                                    "value": "Standard_H16mr"
                                },
                                {
                                    "label": "Standard_L4s",
                                    "value": "Standard_L4s"
                                },
                                {
                                    "label": "Standard_L8s",
                                    "value": "Standard_L8s"
                                },
                                {
                                    "label": "Standard_L8s_v2",
                                    "value": "Standard_L8s_v2"
                                },
                                {
                                    "label": "Standard_L16s",
                                    "value": "Standard_L16s"
                                },
                                {
                                    "label": "Standard_L16s_v2",
                                    "value": "Standard_L16s_v2"
                                },
                                {
                                    "label": "Standard_L32s",
                                    "value": "Standard_L32s"
                                },
                                {
                                    "label": "Standard_L32s_v2",
                                    "value": "Standard_L32s_v2"
                                },
                                {
                                    "label": "Standard_L64s_v2",
                                    "value": "Standard_L64s_v2"
                                },
                                {
                                    "label": "Standard_L80s_v2",
                                    "value": "Standard_L80s_v2"
                                },
                                {
                                    "label": "Standard_M8ms",
                                    "value": "Standard_M8ms"
                                },
                                {
                                    "label": "Standard_M16ms",
                                    "value": "Standard_M16ms"
                                },
                                {
                                    "label": "Standard_M32ms",
                                    "value": "Standard_M32ms"
                                },
                                {
                                    "label": "Standard_M64",
                                    "value": "Standard_M64"
                                },
                                {
                                    "label": "Standard_M64m",
                                    "value": "Standard_M64m"
                                },
                                {
                                    "label": "Standard_M64ms",
                                    "value": "Standard_M64ms"
                                },
                                {
                                    "label": "Standard_M64s",
                                    "value": "Standard_M64s"
                                },
                                {
                                    "label": "Standard_NC6",
                                    "value": "Standard_NC6"
                                },
                                {
                                    "label": "Standard_NC6s_v2",
                                    "value": "Standard_NC6s_v2"
                                },
                                {
                                    "label": "Standard_NC6s_v3",
                                    "value": "Standard_NC6s_v3"
                                },
                                {
                                    "label": "Standard_NC12",
                                    "value": "Standard_NC12"
                                },
                                {
                                    "label": "Standard_NC12s_v2",
                                    "value": "Standard_NC12s_v2"
                                },
                                {
                                    "label": "Standard_NC12s_v3",
                                    "value": "Standard_NC12s_v3"
                                },
                                {
                                    "label": "Standard_NC24",
                                    "value": "Standard_NC24"
                                },
                                {
                                    "label": "Standard_NC24r",
                                    "value": "Standard_NC24r"
                                },
                                {
                                    "label": "Standard_NC24rs_v2",
                                    "value": "Standard_NC24rs_v2"
                                },
                                {
                                    "label": "Standard_NC24rs_v3",
                                    "value": "Standard_NC24rs_v3"
                                },
                                {
                                    "label": "Standard_NC24s_v2",
                                    "value": "Standard_NC24s_v2"
                                },
                                {
                                    "label": "Standard_NC24s_v3",
                                    "value": "Standard_NC24s_v3"
                                },
                                {
                                    "label": "Standard_ND6s",
                                    "value": "Standard_ND6s"
                                },
                                {
                                    "label": "Standard_ND12s",
                                    "value": "Standard_ND12s"
                                },
                                {
                                    "label": "Standard_ND24rs",
                                    "value": "Standard_ND24rs"
                                },
                                {
                                    "label": "Standard_ND24s",
                                    "value": "Standard_ND24s"
                                },
                                {
                                    "label": "Standard_NV6",
                                    "value": "Standard_NV6"
                                },
                                {
                                    "label": "Standard_NV6s_v2",
                                    "value": "Standard_NV6s_v2"
                                },
                                {
                                    "label": "Standard_NV12",
                                    "value": "Standard_NV12"
                                },
                                {
                                    "label": "Standard_NV12s_v2",
                                    "value": "Standard_NV12s_v2"
                                },
                                {
                                    "label": "Standard_NV24",
                                    "value": "Standard_NV24"
                                },
                                {
                                    "label": "Standard_NV24s_v2",
                                    "value": "Standard_NV24s_v2"
                                },
                                {
                                    "label": "Standard_D2hs_v3",
                                    "value": "Standard_D2hs_v3"
                                },
                                {
                                    "label": "Standard_D4hs_v3",
                                    "value": "Standard_D4hs_v3"
                                },
                                {
                                    "label": "Standard_D8hs_v3",
                                    "value": "Standard_D8hs_v3"
                                },
                                {
                                    "label": "Standard_B2hms",
                                    "value": "Standard_B2hms"
                                },
                                {
                                    "label": "Standard_B4hms",
                                    "value": "Standard_B4hms"
                                },
                                {
                                    "label": "Standard_NV4ahs_v4",
                                    "value": "Standard_NV4ahs_v4"
                                },
                                {
                                    "label": "Standard_NV8ahs_v4",
                                    "value": "Standard_NV8ahs_v4"
                                },
                                {
                                    "label": "Standard_NV16ahs_v4",
                                    "value": "Standard_NV16ahs_v4"
                                },
                                {
                                    "label": "Standard_NV32ah7s_v4",
                                    "value": "Standard_NV32ah7s_v4"
                                },
                                {
                                    "label": "Standard_NV12hs_v3",
                                    "value": "Standard_NV12hs_v3"
                                },
                                {
                                    "label": "Standard_NV12hs_v3",
                                    "value": "Standard_NV12hs_v3"
                                },
                                {
                                    "label": "Standard_NV6h",
                                    "value": "Standard_NV6h"
                                },
                                {
                                    "label": "Standard_NV12s_v3",
                                    "value": "Standard_NV12s_v3"
                                },
                                {
                                    "label": "Standard_NV24s_v3",
                                    "value": "Standard_NV24s_v3"
                                },
                                {
                                    "label": "Standard_NV48s_v3",
                                    "value": "Standard_NV48s_v3"
                                },
                                {
                                    "label": "Standard_NV4as_v4",
                                    "value": "Standard_NV4as_v4"
                                },
                                {
                                    "label": "Standard_NV8as_v4",
                                    "value": "Standard_NV8as_v4"
                                },
                                {
                                    "label": "Standard_NV16as_v4",
                                    "value": "Standard_NV16as_v4"
                                },
                                {
                                    "label": "Standard_NV32as_v4",
                                    "value": "Standard_NV32as_v4"
                                }
                            ],
                            "required": true
                        }
                    }
                ]
            }
        ],
        "outputs": {
            "enableErGw": "[steps('esConnectivityGoalState').esErGw]",
            "enableVpnGw": "[steps('esConnectivityGoalState').esVpnGw]",
            "enableVwan": "[steps('esConnectivityGoalState').esVwan]",
            "enableConnectivity": "[steps('esConnectivityGoalState').esConnectivity]",
            "connectivitySubscriptionId": "[if(not(equals(steps('esConnectivityGoalState').esConnectivitySub, steps('esGoalState').esMgmtSub)), steps('esConnectivityGoalState').esConnectivitySub, '')]",
            "enableAzFw": "[steps('esConnectivityGoalState').esAzFw]",
            "addressPrefix": "[steps('esConnectivityGoalState').esAddress]",
            "location": "[steps('esConnectivityGoalState').esNwLocation]",
            "managementSubscriptionId": "[steps('esGoalState').esMgmtSub]",
            "identitySubscriptionId": "[if(or(not(equals(steps('esIdentityGoalState').esIdentitySub, steps('esGoalState').esMgmtSub)), not(equals(steps('esIdentityGoalState').esIdentitySub, steps('esConnectivityGoalState').esConnectivitySub))), steps('esIdentityGoalState').esIdentitySub, '')]",
            "onlineLzSubscriptionId": "[if(or(not(contains(steps('lzGoalState').esOnlineLzSub, steps('esGoalState').esMgmtSub)), not(contains(steps('lzGoalState').esOnlineLzSub, steps('esConnectivityGoalState').esConnectivitySub))), steps('lzGoalState').esOnlineLzSub, '')]",
            "corpLzSubscriptionId": "[if(or(not(contains(steps('lzGoalState').esCorpLzSub, steps('esGoalState').esMgmtSub)), not(contains(steps('lzGoalState').esCorpLzSub, steps('esConnectivityGoalState').esConnectivitySub))), steps('lzGoalState').esCorpLzSub, '')]",
            "devopsLzSubscriptionId": "[if(or(not(contains(steps('lzGoalState').esDevOpsLzSub, steps('esGoalState').esMgmtSub)), not(contains(steps('lzGoalState').esDevOpsLzSub, steps('esConnectivityGoalState').esConnectivitySub))), steps('lzGoalState').esDevOpsLzSub, '')]",
            "enableLogAnalytics": "[steps('esGoalState').esLogAnalytics]",
            "enableCustomRBAC": "[steps('esGoalState').esCustomRbacDefinition]",
            "denyRdpForIdentity": "[steps('esIdentityGoalState').esIdDenyRdp]",
            "denySubnetWithoutNsgForIdentity": "[steps('esIdentityGoalState').esIdDenySubnetNsg]",
            "denyPipForIdentity": "[steps('esIdentityGoalState').esIdDenyPublicIp]",
            "enableVmBackupForIdentity": "[steps('esIdentityGoalState').esIdAzBackup]",
            "enableAsc": "[steps('esGoalState').esAsc]",
            "enableAscForServers": "[steps('esGoalState').esAscVms]",
            "enableAscForAppServices": "[steps('esGoalState').esAscApps]",
            "enableAscForStorage": "[steps('esGoalState').esAscStorage]",
            "enableAscForSql": "[steps('esGoalState').esAscSql]",
            "enableAscForKeyVault": "[steps('esGoalState').esAscKeyVault]",
            "enableAscForArm": "[steps('esGoalState').esAscArm]",
            "enableAscForDns": "[steps('esGoalState').esAscDns]",
            "enableAscForKubernetes": "[steps('esGoalState').esAscKubernetes]",
            "enableAscForRegistries": "[steps('esGoalState').esAscRegistries]",
            "enableSecuritySolution": "[steps('esGoalState').esSecuritySolution]",
            "enableAgentHealth": "[steps('esGoalState').esAgentSolution]",
            "enableChangeTracking": "[steps('esGoalState').esChangeTracking]",
            "enableUpdateMgmt": "[steps('esGoalState').esUpdateMgmt]",
            "enableActivityLog": "[steps('esGoalState').esActivityLog]",
            "enableVmInsights": "[steps('esGoalState').esVmInsights]",
            "enableAntiMalware": "[steps('esGoalState').esAntiMalware]",
            "enableServiceMap": "[steps('esGoalState').esServiceMap]",
            "enableSqlAssessment": "[steps('esGoalState').esSqlAssessment]",
            "NamingConvention": "[steps('lzSettings').esNamingConvention]",
            "enterpriseScaleCompanyPrefix": "[steps('lzSettings').esMgmtGroup]",
            "enableSqlAudit": "[steps('lzGoalState').esSqlAudit]",
            "enableSqlEncryption": "[steps('lzGoalState').esSqlEncryption]",
            "enableVmBackup": "[steps('lzGoalState').esAzBackup]",
            "enableAksPolicy": "[steps('lzGoalState').esAksPolicy]",
            "denyAksPrivileged": "[steps('lzGoalState').esAksPriv]",
            "denyAksPrivilegedEscalation": "[steps('lzGoalState').esAksNoPriv]",
            "denyHttpIngressForAks": "[steps('lzGoalState').esAksIngress]",
            "denyRdp": "[steps('lzGoalState').esDenyRdp]",
            "enableStorageHttps": "[steps('lzGoalState').esHttpsStorage]",
            "denyIpForwarding": "[steps('lzGoalState').esIpForwarding]",
            "denySubnetWithoutNsg": "[steps('lzGoalState').esNsg]",
            "retentionInDays": "[string(steps('esGoalState').esLogRetention)]",
            "enableVmMonitoring": "[steps('lzGoalState').esVmMonitoring]",
            "enableVmssMonitoring": "[steps('lzGoalState').esVmssMonitoring]",
            "enableArcMonitoring": "[steps('lzGoalState').esArcVmMonitoring]",
            "allowedVMSizesku": "[steps('lzGoalState').esvirtualMachineSize]",
            "apply-pbmm": "[steps('esGovernance').esapply-pbmm]",
            "apply-kubclust-sec-base-linux-wk": "[steps('esGovernance').esapply-kubclust-sec-base-linux-wk]",
            "apply-kubclust-sec-strict-linux-wk": "[steps('esGovernance').esapply-kubclust-sec-strict-linux-wk]",
            "apply-windows-vm-security-base": "[steps('esGovernance').esapply-windows-vm-security-base]",
            "apply-data-protection-suite": "[steps('esGovernance').esapply-data-protection-suite]",
            "apply-flowlog-nsg-iaas": "[steps('esGovernance').esapply-flowlog-nsg-iaas]",
            "apply-config-azuremonitor-security-agent-vm-iaas": "[steps('esGovernance').esapply-config-azuremonitor-security-agent-vm-iaas]",
            "apply-vm-insecure-pwd-security-iaas": "[steps('esGovernance').esapply-vm-insecure-pwd-security-iaas]",
            "apply-deny-public-endpoint-paas": "[steps('esGovernance').esapply-deny-public-endpoint-paas]",
            "sapply-tls-ssl-enforcement-encrypt-paas": "[steps('esGovernance').esapply-tls-ssl-enforcement-encrypt-paas]",
            "apply-audit-resource-without-encryption": "[steps('esGovernance').esapply-audit-resource-without-encryption]",
            "cktagbyresource": "[steps('esGovernance').cktagbyresource]",
            "tagauditpolicy": "[steps('esGovernance').estagauditpolicy]",
            "tagsByResource": "[steps('esGovernance').tagcostbyresource]",
            "listOfResourceTypesWithDiagnosticLogsEnabled": "[steps('esGovernance').eslistOfResourceTypesWithDiagnosticLogsEnabled]",
            "listOfMembersToExcludeFromWindowsVMAdministratorsGroup": "[steps('esGovernance').eslistOfMembersToExcludeFromWindowsVMAdministratorsGroup]",
            "listOfMembersToIncludeInWindowsVMAdministratorsGroup": "[steps('esGovernance').eslistOfMembersToIncludeInWindowsVMAdministratorsGroup]"
        }
    }
}